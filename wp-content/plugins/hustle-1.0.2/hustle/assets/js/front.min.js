"use strict";var Optin=Optin||{};Optin.View={},Optin.Models={},Optin.Events={},"undefined"!=typeof Backbone&&_.extend(Optin.Events,Backbone.Events),function(i){Optin.COOKIE_PREFIX="inc_optin_long_hidden-",Optin.POPUP_COOKIE_PREFIX="inc_optin_popup_long_hidden-",Optin.SLIDE_IN_COOKIE_PREFIX="inc_optin_slide_in_long_hidden-",Optin.SLIDE_IN_COOKIE_HIDE_ALL="inc_optin_slide_in_hide_all",_.mixin({toBool:function(i){return _.isBoolean(i)?i:_.isString(i)&&["true","false","1"].indexOf(i.toLowerCase())!==-1?"true"===i.toLowerCase()||"1"===i.toLowerCase():_.isNumber(i)?!!i:!(_.isUndefined(i)||_.isNull(i)||_.isNaN(i))&&i},isTrue:function(i){return!(_.isUndefined(i)||_.isNull(i)||_.isNaN(i))&&(_.isNumber(i)?0!==i:(i=i.toString().toLowerCase(),["1","true"].indexOf(i)!==-1))},control_base:function(i,t,e){return e=_.isUndefined(e)?"checked":e,i=_.toBool(i),t=_.isBoolean(i)?_.isTrue(t):t,_.isEqual(i,t)?e+'="'+e+'"':""},checked:function(i,t){return _.control_base(i,t,"checked")},selected:function(i,t){return _.control_base(i,t,"selected")},disabled:function(i,t){return _.control_base(i,t,"disabled")}}),_.findKey||_.mixin({findKey:function(i,t,e){t=cb(t,e);for(var n,o=_.keys(i),a=0,s=o.length;a<s;a++)if(n=o[a],t(i[n],n,i))return n}}),Array.prototype.has=function(i){return this.indexOf(i)!==-1},String.prototype.toInt=function(){return parseInt(this,10)},String.prototype.isEmpty=function(){return 0===this.length||!this.trim()},Optin.template=_.memoize(function(t){var e,n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return function(o){return(e=e||_.template(i("#"+t).html(),null,n))(o)}}),Optin.cookie={get:function(i){var t,e,n,o=document.cookie.split(";");for(n=i+"=",t=0;t<o.length;t+=1){for(e=o[t];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(n)){var a=e.substring(n.length,e.length);return a?JSON.parse(a):a}}return null},set:function(t,e,n){var o,a;e=i.isArray(e)||i.isPlainObject(e)?JSON.stringify(e):e,isNaN(n)?a="":(o=new Date,o.setTime(o.getTime()+24*n*60*60*1e3),a="; expires="+o.toGMTString()),document.cookie=t+"="+e+a+"; path=/"}},i(document).on("blur","input, textarea, select",function(){var t=i(this);t.is(":input[type=button], :input[type=submit], :input[type=reset]")||(""!==t.val().trim()?t.parent().addClass("wpoi-filled"):t.parent().removeClass("wpoi-filled"))}),Optin.Mixins={_mixins:{},_services_mixins:{},_desing_mixins:{},_display_mixins:{},add:function(i,t){this._mixins[i]=t},get_mixins:function(){return this._mixins},add_services_mixin:function(i,t){this._services_mixins[i]=t},get_services_mixins:function(){return this._services_mixins}},i(document).on("blur","input, textarea, select",function(){var t=i(this);t.is(":input[type=button], :input[type=submit], :input[type=reset]")||(""!==t.val().trim()?t.parent().addClass("wpoi-filled"):t.parent().removeClass("wpoi-filled"))})}(jQuery),function(i,t,e){var n=function(i,t,e){if("immediately"===t.trigger_on_time&&e.display(),"time"===t.trigger_on_time){var n;switch(t.appear_after_time_unit){case"minutes":n=60*parseInt(t.appear_after_time_val,10)*1e3;break;case"hours":n=60*parseInt(t.appear_after_time_val,10)*60*1e3;break;default:n=1e3*parseInt(t.appear_after_time_val,10)}_.delay(function(){e.display()},n)}},o=function(n,o,a){if("scrolled"===o.appear_after&&i(e).scroll(_.debounce(function(){100*e.pageYOffset/i(t).height()>=parseInt(o.appear_after_page_portion_val,10)&&a.display()},50)),"selector"===o.appear_after){var s=i(o.appear_after_element_val);s.length&&i(e).scroll(_.debounce(function(){e.pageYOffset>=s.position().top&&a.display()},50))}},a=function(e,n,o){if(""!==i.trim(n.trigger_on_element_click)){var a=i(i.trim(n.trigger_on_element_click));a.length&&i(t).on("click",i.trim(n.trigger_on_element_click),o.display)}i(t).on("click",".inc_opt_hustle_shortcode_trigger",function(t){t.preventDefault(),i(this).data("id")==e.data.optin_id&&"popup"==i(this).data("type")&&o.display()})},s=function(e,n,o){_.isTrue(n.trigger_on_exit)&&(Optin.listen_to_exit_intend(),i(t).on("wpoi:exit_intended",o.display))},p=function(i,t,e){if(_.isTrue(t.trigger_on_adblock)){if(!Optin.is_adblock_enabled())return;if(_.isTrue(t.trigger_on_adblock_timed)){var n;switch(t.trigger_on_adblock_timed_unit){case"minutes":n=60*parseInt(t.trigger_on_adblock_timed_val,10)*1e3;break;case"hours":n=60*parseInt(t.trigger_on_adblock_timed_val,10)*60*1e3;break;default:n=1e3*parseInt(t.trigger_on_adblock_timed_val,10)}_.delay(function(){e.display()},n)}else e.display()}};Optin.Triggers={time:n,scroll:o,scrolled:o,click:a,exit_intent:s,adblock:p}}(jQuery,document,window),function(i){i(document).on("wpoi:display",function(t,e,n,o){var a="wpoi-optin-{type}-shown-count-".replace("{type}",e)+o.data.optin_id,s=Optin.cookie.get(a)||0,p=e&&o.settings[e].is_test;p||Optin.cookie.set(a,s+1,30),i.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"inc_opt_optin_viewed",data:{optin_id:o.data.optin_id,page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:e,uri:encodeURI(window.location.href)}},success:function(i){}})})}(jQuery),function(i){Optin=Optin||{},Optin.handle_scroll=function(t,e,n){var o=i(window),a=i(document);o.on("scroll",_.debounce(function(i){var s=t[0],p=s.getBoundingClientRect();p.top>=0&&p.left>=0&&p.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&p.right<=(window.innerWidth||document.documentElement.clientWidth)&&(o.off(i),t.addClass("wpoi-show"),a.trigger("wpoi:display",[e,t,n]))},5,!0))}}(jQuery),function(i){function t(t,e){var n=t.find(".required"),o=(i('<i class="wpoi-icon i-error"></i>'),[]);return i(".wpoi-field-error").remove(),n.each(function(){var t=i(this),n=t.attr("name")+"_error";return e?(t.next("label").find("i.wpoi-icon").addClass("i-error"),o.push(t),o):void(_.isEmpty(this.value)||t.is("[type='email']")&&!this.value.trim().match(/^[\S]+\@[a-zA-Z0-9]+\.[\S]{2,}$/gi)?(t.next("label").find("i.wpoi-icon").addClass("i-error"),o.push(t)):i("."+n).remove())}),0===o.length}i(document).on("submit",".inc_optin form",function(e){e.preventDefault();var n=i(e.target),o=n.find("button"),a=n.closest(".inc_optin"),s=a.data("handle"),p=a.data("delay_id"),r=Optins[s],d=this,l=(i(this).closest(".wpoi-optin > .wpoi-container"),n.closest(".inc_optin").data("type")),c=l&&r.settings[l].is_test,u=i("<span class='wpoi-submit-failure'>"+inc_opt.l10n.submit_failure+"</span>");n.parent().find(".wpoi-submit-failure").remove(),_.isUndefined(p)||clearTimeout(p),!n.data("sending")&&t(n,c)&&(o.attr("disabled",!0),o.addClass("loading"),n.addClass("loading"),n.data("sending",!0),i.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"inc_opt_submit_opt_in",data:{form:n.serialize(),optin_id:r.data.optin_id,page_type:inc_opt.page_type,page_id:inc_opt.page_id,uri:encodeURI(window.location.href),type:l}},success:function(t){if(t&&t.success){var e=n.closest(".wpoi-hustle");e.find(".wpoi-success-message").addClass("wpoi-show-message"),_.delay(function(){i(d).closest(".inc_optin").find(".inc-opt-close-popup").trigger("click")},3e3)}else n.after(u)},error:function(){n.after(u)},complete:function(){o.attr("disabled",!1),n.removeClass("loading"),o.removeClass("loading"),n.data("sending",!1)}}))})}(jQuery);var Optin=Optin||{};!function(i,t){function e(){var t=a.height(),e=a.scrollTop(),n=e+t;i.each(o,function(){var t=i(this),o=t.outerHeight(),a=t.offset().top,s=a+o;s>=e&&a<=n?t.addClass("in-view"):t.removeClass("in-view")})}function n(t,e,n,o){"wpoi:display"===t.type&&"popup"===e?!function(){var t=i("popup"===e?window:this),o=n.find(".wpoi-hustle");t.width()<=405?o.find(".wpoi-optin").addClass("wpoi-small"):o.find(".wpoi-optin").removeClass("wpoi-small"),t.width()<=585&&t.width()>405?o.find(".wpoi-optin").addClass("wpoi-medium"):o.find(".wpoi-optin").removeClass("wpoi-medium")}():i(".wpoi-hustle").each(function(){var t=i("popup"===e?window:this),n=i(this);t.width()<=405?n.find(".wpoi-optin").addClass("wpoi-small"):n.find(".wpoi-optin").removeClass("wpoi-small"),t.width()<=585&&t.width()>405?n.find(".wpoi-optin").addClass("wpoi-medium"):n.find(".wpoi-optin").removeClass("wpoi-medium")}),i(".wpoi-mcg-select").each(function(){i(this).parent(".wpoi-provider-args > .wpoi-container > .wpoi-element:nth-child(2) > .wpoi-container > .wpoi-element").css({padding:"0",background:"transparent"})}),i(".wpoi-layout-three .wpoi-optin:not(.wpoi-small) .nocontent:not(.noimage)").each(function(){var t=i(this),e=t.find(".wpoi-aside-x").prev(".wpoi-element"),n=t.find(".wpoi-aside-x").prev(".wpoi-element").find(".wpoi-container.wpoi-col");n.css("height",e.height())}),i(".wpoi-layout-three .wpoi-optin:not(.wpoi-small) > .wpoi-container.noimage:not(.nocontent)").each(function(){var t=i(this),e=t.find(".wpoi-aside-x"),n=t.find(".wpoi-image").next(".wpoi-element"),o=e.prev(".wpoi-element"),a=t.find(".wpoi-content"),s=o.find(".wpoi-col"),p=t.find("form");p.height()>a.height()&&(s.css("height",e.height()+"px"),n.addClass("wpoi-align"),a.addClass("wpoi-align-element")),p.height()<a.height()&&(e.css("height",o.height()+"px"),e.addClass("wpoi-align"),p.addClass("wpoi-align-element"))}),i(".wpoi-layout-three .wpoi-optin:not(.wpoi-small) > .wpoi-container:not(.noimage):not(.nocontent)").each(function(){var t=i(this),e=t.find(".wpoi-aside-x"),n=e.prev(".wpoi-element"),o=t.find("form");o.height()<n.height()&&(e.css("height",n.height()),e.addClass("wpoi-align"),o.addClass("wpoi-align-element"))}),i(".wpoi-layout-four .wpoi-optin:not(.wpoi-small) > .wpoi-container.noimage:not(.nocontent)").each(function(){var t=i(this),e=t.find(".wpoi-aside-xl"),n=t.find(".wpoi-aside-xl > .wpoi-container"),o=e.find(".wpoi-form"),a=e.find("form"),s=e.next(".wpoi-element"),p=s.find(".wpoi-content");p.height()>a.height()&&(n.css("height",e.height()+"px"),o.addClass("wpoi-align"),a.addClass("wpoi-align-element")),p.height()<a.height()&&(s.css("height",n.height()+"px"),s.addClass("wpoi-align"),p.addClass("wpoi-align-element"))}),i(".wpoi-layout-four .wpoi-optin:not(.wpoi-small) > .wpoi-container:not(.noimage):not(.nocontent)").each(function(){var t=i(this),e=t.find(".wpoi-aside-xl"),n=t.find(".wpoi-aside-xl > .wpoi-container"),o=t.find(".wpoi-image"),a=e.find(".wpoi-form"),s=e.find("form"),p=e.next(".wpoi-element"),r=t.find(".wpoi-content");r.height()>n.height()&&(n.css("height",e.height()+"px"),a.css("height",n.height()-o.height()),a.addClass("wpoi-align"),s.addClass("wpoi-align-element")),r.height()<n.height()&&(p.css("height",e.height()+"px"),p.addClass("wpoi-align"),r.addClass("wpoi-align-element"))})}i.each(["show","hide"],function(t,e){var n=i.fn[e];i.fn[e]=function(){return this.trigger(e),n.apply(this,arguments)}}),Optin.get_tpl=function(i){var t=["optin-layout-one","optin-layout-two","optin-layout-three","optin-layout-four"];return Optin.template(t[i])},Optin.popup={shown:[],hidden:[],long_hidden:[],is_already_shown:function(i){return-1!==this.shown.indexOf(i)},is_long_hidden:function(i){return!!Optin.cookie.get(Optin.POPUP_COOKIE_PREFIX+i.id)},show:function(i){return!this.is_long_hidden(i)&&(this.is_already_shown(i.id)?void 0:i.show())}};var o=i(".inc_opt_inline_wrap"),a=i(window);i(t).on("wpoi:display",_.debounce(n,50,!1)),i(window).on("resize",_.debounce(n,50,!1)),a.on("scroll resize",_.debounce(e,50,!1)),a.trigger("scroll"),i(document).on("blur","input, textarea, select",function(){var t=i(this);t.is(":input[type=button], :input[type=submit], :input[type=reset]")||(""!==t.val().trim()?t.parent().addClass("wpoi-filled"):t.parent().removeClass("wpoi-filled"))}),i(document).on("focus",".wpoi-optin input.required",function(){i(this).next("label").find("i.wpoi-icon").removeClass("i-error")}),Optin.render_provider_args=function(i){if(_.isEmpty(i.provider_args))return"";var t=Optin.template("optin-"+i.data.optin_provider+"-args");return t(i.provider_args)},Optin.render_optin=function(e){var n=e.design.form_location.toInt(),o=Optin.get_tpl(n),a=function(){return!("mailchimp"!==e.data.optin_provider||!e.provider_args||!e.provider_args.group||"hidden"===e.provider_args.group.form_field)},s=o(_.extend({image_style:""},e.design,e.design.borders,e.data,{has_args:a()}));return i(t).trigger("wpoi:layout:rendered"),s};var s=!1;Optin.listen_to_exit_intend=function(){s||(i(t).on("mouseleave",_.debounce(function(e){e.pageY<=0&&i(t).trigger("wpoi:exit_intended",e)},50,!0)),s=!0)};var p=!1;Optin.is_adblock_enabled=function(){if(!p)return!i("#hustle_optin_adBlock_detector").length}}(jQuery,document),function(i){i(".inc_opt_after_content_wrap").each(function(){var t=i(this),e=t.data("id");if(e){var n=_.find(Optins,function(i){return e==i.data.optin_id});if(n&&(t.data("handle",_.findKey(Optins,n)),t.data("type","after_content"),_.isTrue(n.settings.after_content.display))){var o=Optin.render_optin(n);Optin.handle_scroll(t,"after_content",n),t.html(o),t.find(".wpoi-provider-args").html(Optin.render_provider_args(n)),i(document).trigger("wpoi:display",["after_content",t,n]),n.settings.after_content.animate&&"true"==n.settings.after_content.animate&&t.addClass(n.settings.after_content.animation)}}})}(jQuery),function(i,t,e){if(!inc_opt.is_upfront){var n=_.keys(Optins),o=!1,a=!1;if(i.each(n,function(i,t){var e=Optins[t];_.isTrue(e.settings.popup.display)&&!_.isTrue(Optin.cookie.get(Optin.POPUP_COOKIE_PREFIX+e.data.optin_id))&&(a=t,o=Optins[a])}),0!=o){var s=Optin.render_optin(o),p=_.isTrue(o.settings.popup.add_never_see_this_message)?'<div class="wpoi-nsa"><a class="inc_opt_never_see_again">%s</a></div>'.replace("%s",inc_opt.l10n.never_see_again):"",r=i('<div class = "inc_opt_popup wpoi-animate inc_optin inc_optin_'+o.data.optin_id+'"><a href="#" aria-label="Close" class="inc-opt-close-popup">&times;</a>'+s+p+"</div>");r.find(".wpoi-provider-args").html(Optin.render_provider_args(o)),o.settings.popup.animation_in&&r.addClass(o.settings.popup.animation_in),r.data("handle",a),r.on("hide",function(){Optin.popup.hidden.push(o.data.optin_id),Optin.popup.long_hidden.push(o.data.optin_id),_.delay(function(){i(".wpoi-overlay-mask").removeClass("wpoi-show"),r.removeClass("wpoi-show")},750),_.isTrue(o.settings.popup.close_button_acts_as_never_see_again)&&Optin.cookie.set(Optin.POPUP_COOKIE_PREFIX+o.data.optin_id,o.data.optin_id,parseInt(o.settings.popup.never_see_expiry,10)),o.settings.popup.animation_in&&(o.settings.popup.animation_out?_.delay(function(){r.removeClass(o.settings.popup.animation_out),r.addClass(o.settings.popup.animation_in)},350):r.addClass(o.settings.popup.animation_in)),i(document).trigger("wpoi:hide",["popup",r,r.data("popup")])}),r.data("handle",a),r.data("popup",o),r.data("type","popup"),r.appendTo("body"),r.display=function(){r.is(".wpoi-show")||(r.removeClass(o.settings.popup.animation_out),i(r).prev(".wpoi-overlay-mask").length?r.prev(".wpoi-overlay-mask").addClass("wpoi-show"):i('<div class="inc_optin_'+o.data.optin_id+' wpoi-overlay-mask wpoi-animate fadein"><div class="wpoi-popup-overlay"></div></div>').insertBefore(r).addClass("wpoi-show"),_.delay(function(){r.addClass("wpoi-show"),o.settings.popup.animation_out&&(o.settings.popup.animation_in?_.delay(function(){r.removeClass(o.settings.popup.animation_in),r.addClass(o.settings.popup.animation_out)},350):r.addClass(o.settings.popup.animation_out))},750),i(document).trigger("wpoi:display",["popup",r,r.data("popup")]))},"function"==typeof Optin.Triggers[o.settings.popup.appear_after]?Optin.Triggers[o.settings.popup.appear_after].call(null,o,o.settings.popup,r):console.log("Hustle:[Popup] No trigger defined for ".popup_optin.settings.popup.appear_after)}i(document).on("click",".inc-opt-close-popup, .wpoi-overlay-mask",function(t){t.preventDefault();var e=i(t.target),n=e.closest(".inc_optin");i(this).hasClass("wpoi-overlay-mask")&&(n=i(this).next(".inc_optin")),n.removeClass("wpoi-show"),n.trigger("hide"),o.settings.popup.animation_out||(n.hide(),_.defer(function(){(n[0].style||{}).display=""}))}),i(document).on("click",".inc_opt_never_see_again",function(t){t.preventDefault(),Optin.cookie.set(Optin.POPUP_COOKIE_PREFIX+o.data.optin_id,o.data.optin_id,parseInt(o.settings.popup.never_see_expiry,10)),i(this).closest(".inc_opt_popup").find(".inc-opt-close-popup").trigger("click")})}}(jQuery,document,window),function(i,t,e){if(!inc_opt.is_upfront&&!_.isTrue(Optin.cookie.get(Optin.SLIDE_IN_COOKIE_HIDE_ALL))){var n=_.keys(Optins),o=!1,a=!1;if(i.each(n,function(i,t){var e=Optins[t];_.isTrue(e.settings.slide_in.display)&&!_.isTrue(Optin.cookie.get(Optin.SLIDE_IN_COOKIE_PREFIX+e.data.optin_id))&&(a=t,o=e)}),0!=o){var s=Optin.render_optin(o),p=_.isTrue(o.settings.slide_in.add_never_see_this_message)?'<div class="wpoi-nsa"><a class="inc_opt_never_see_again">%s</a></div>'.replace("%s",inc_opt.l10n.never_see_again):"",r=i('<div class="inc_opt_slidein inc_opt_slidein_'+o.settings.slide_in.position+" inc_optin inc_optin_"+o.data.optin_id+' wpoi-slide"><a href="#" class="inc-opt-close-popup" aria-label="Close" >&times;</a>'+s+p+"</div>");r.find(".wpoi-provider-args").html(Optin.render_provider_args(o)),r.data("handle",a),r.on("show",function(){if(Optin.popup.shown.push(r.id),_.isTrue(o.settings.slide_in.hide_after)){var i="minutes"===o.settings.slide_in.hide_after_unit?60*parseInt(o.settings.slide_in.hide_after_val,10)*1e3:1e3*parseInt(o.settings.slide_in.hide_after_val,10),t=_.delay(function(){r.data("prevent_hide_after")||r.removeClass("wpoi-show")},i);r.data("delay_id",t)}}),r.data("handle",a),r.data("popup",o),r.data("type","slide_in"),r.on("hide",function(){var t=i(this),e=t.data("popup");"hide_all"===e.settings.slide_in.after_close&&Optin.cookie.set(Optin.SLIDE_IN_COOKIE_HIDE_ALL,e.data.optin_id,30),"no_show"===e.settings.slide_in.after_close&&Optin.cookie.set(Optin.SLIDE_IN_COOKIE_PREFIX+e.data.optin_id,e.data.optin_id,30),i(document).trigger("wpoi:hide",["slide_in",t,e])}),r.appendTo("body"),r.on("click",function(){r.data("prevent_hide_after",!0)}),r.display=function(){r.is(".wpoi-show")||r.is(".wpoi-shown")||(r.addClass("wpoi-show"),r.addClass("wpoi-shown"),r.show(),o.settings.slide_in.animation_out&&(o.settings.slide_in.animation_in?_.delay(function(){r.removeClass(o.settings.slide_in.animation_in),r.addClass(o.settings.slide_in.animation_out)},350):r.addClass(o.settings.slide_in.animation_out)),r.trigger("show"),i(document).trigger("wpoi:display",["slide_in",r,r.data("popup")]))},"function"==typeof Optin.Triggers[o.settings.slide_in.appear_after]?Optin.Triggers[o.settings.slide_in.appear_after].call(null,o,o.settings.slide_in,r):console.log("Hustle:[Popup] No trigger defined for ".popup_optin.settings.popup.appear_after)}}}(jQuery,document,window),function(i){var t=_.debounce(function(){i(".inc_opt_widget_wrap, .inc_opt_shortcode_wrap").each(function(){var t=i(this),e=t.data("id"),n=t.is(".inc_opt_widget_wrap")?"widget":"shortcode";if(e){var o=_.find(Optins,function(i){return e==i.data.optin_id});if(o){t.data("handle",_.findKey(Optins,o)),t.data("type",n);var a=Optin.render_optin(o);Optin.handle_scroll(t,n,o),t.html(a),t.find(".wpoi-provider-args").html(Optin.render_provider_args(o)),_.delay(function(){i(document).trigger("wpoi:display",[n,t,o])},_.random(0,300))}}})},50,!0);t(),i(document).on("upfront-load",function(){t(),Upfront.Events.on("entity:object:refresh:start entity:object:refresh preview:build:start upfront:preview:build:stop",t)})}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwiZGlzcGxheV90cmlnZ2Vycy5qcyIsImxvZy5qcyIsInNjcm9sbC5qcyIsInN1Ym1pdC5qcyIsImZyb250X3V0aWxzLmpzIiwiYWZ0ZXJfY29udGVudC5qcyIsInBvcHVwLmpzIiwic2xpZGUtaW4uanMiLCJ3aWRnZXRzLmpzIl0sIm5hbWVzIjpbIk9wdGluIiwiVmlldyIsIk1vZGVscyIsIkV2ZW50cyIsIkJhY2tib25lIiwiXyIsImV4dGVuZCIsIiQiLCJDT09LSUVfUFJFRklYIiwiUE9QVVBfQ09PS0lFX1BSRUZJWCIsIlNMSURFX0lOX0NPT0tJRV9QUkVGSVgiLCJTTElERV9JTl9DT09LSUVfSElERV9BTEwiLCJtaXhpbiIsInRvQm9vbCIsInZhbCIsImlzQm9vbGVhbiIsImlzU3RyaW5nIiwiaW5kZXhPZiIsInRvTG93ZXJDYXNlIiwiaXNOdW1iZXIiLCJpc1VuZGVmaW5lZCIsImlzTnVsbCIsImlzTmFOIiwiaXNUcnVlIiwidG9TdHJpbmciLCJjb250cm9sX2Jhc2UiLCJjaGVja2VkIiwiY3VycmVudCIsImF0dHJpYnV0ZSIsImlzRXF1YWwiLCJzZWxlY3RlZCIsImRpc2FibGVkIiwiZmluZEtleSIsIm9iaiIsInByZWRpY2F0ZSIsImNvbnRleHQiLCJjYiIsImtleSIsImtleXMiLCJpIiwibGVuZ3RoIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJoYXMiLCJlbGVtZW50IiwidGhpcyIsIlN0cmluZyIsInRvSW50IiwicGFyc2VJbnQiLCJpc0VtcHR5IiwidHJpbSIsInRlbXBsYXRlIiwibWVtb2l6ZSIsImlkIiwiY29tcGlsZWQiLCJvcHRpb25zIiwiZXZhbHVhdGUiLCJpbnRlcnBvbGF0ZSIsImVzY2FwZSIsImRhdGEiLCJodG1sIiwiY29va2llIiwiZ2V0IiwibmFtZSIsImMiLCJjb29raWVfbmFtZSIsImNhIiwiZG9jdW1lbnQiLCJzcGxpdCIsImNoYXJBdCIsInN1YnN0cmluZyIsIl92YWwiLCJKU09OIiwicGFyc2UiLCJzZXQiLCJ2YWx1ZSIsImRheXMiLCJkYXRlIiwiZXhwaXJlcyIsImlzQXJyYXkiLCJpc1BsYWluT2JqZWN0Iiwic3RyaW5naWZ5IiwiRGF0ZSIsInNldFRpbWUiLCJnZXRUaW1lIiwidG9HTVRTdHJpbmciLCJvbiIsIiR0aGlzIiwiaXMiLCJwYXJlbnQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiTWl4aW5zIiwiX21peGlucyIsIl9zZXJ2aWNlc19taXhpbnMiLCJfZGVzaW5nX21peGlucyIsIl9kaXNwbGF5X21peGlucyIsImFkZCIsImdldF9taXhpbnMiLCJhZGRfc2VydmljZXNfbWl4aW4iLCJnZXRfc2VydmljZXNfbWl4aW5zIiwialF1ZXJ5IiwiZG9jIiwid2luIiwidGltZV90cmlnZ2VyIiwib3B0aW4iLCJzZXR0aW5nIiwicG9wdXAiLCJ0cmlnZ2VyX29uX3RpbWUiLCJkaXNwbGF5IiwidHJpZ2dlcl9vbl90aW1lX2RlbGF5IiwiYXBwZWFyX2FmdGVyX3RpbWVfdW5pdCIsImFwcGVhcl9hZnRlcl90aW1lX3ZhbCIsImRlbGF5Iiwic2Nyb2xsX3RyaWdnZXIiLCJhcHBlYXJfYWZ0ZXIiLCJzY3JvbGwiLCJkZWJvdW5jZSIsInBhZ2VZT2Zmc2V0IiwiaGVpZ2h0IiwiYXBwZWFyX2FmdGVyX3BhZ2VfcG9ydGlvbl92YWwiLCIkZWwiLCJhcHBlYXJfYWZ0ZXJfZWxlbWVudF92YWwiLCJwb3NpdGlvbiIsInRvcCIsImNsaWNrX3RyaWdnZXIiLCJ0cmlnZ2VyX29uX2VsZW1lbnRfY2xpY2siLCIkY2xpY2thYmxlIiwiZSIsInByZXZlbnREZWZhdWx0Iiwib3B0aW5faWQiLCJleGl0X2ludGVudF90cmlnZ2VyIiwidHJpZ2dlcl9vbl9leGl0IiwibGlzdGVuX3RvX2V4aXRfaW50ZW5kIiwiYWRibG9ja190cmlnZ2VyIiwidHJpZ2dlcl9vbl9hZGJsb2NrIiwiaXNfYWRibG9ja19lbmFibGVkIiwidHJpZ2dlcl9vbl9hZGJsb2NrX3RpbWVkIiwidHJpZ2dlcl9vbl9hZGJsb2NrX2RlbGF5IiwidHJpZ2dlcl9vbl9hZGJsb2NrX3RpbWVkX3VuaXQiLCJ0cmlnZ2VyX29uX2FkYmxvY2tfdGltZWRfdmFsIiwiVHJpZ2dlcnMiLCJ0aW1lIiwic2Nyb2xsZWQiLCJjbGljayIsImV4aXRfaW50ZW50IiwiYWRibG9jayIsIndpbmRvdyIsInR5cGUiLCIkb3B0aW4iLCJrIiwicmVwbGFjZSIsInByZXZfc2hvd25fY291bnQiLCJpc190ZXN0Iiwic2V0dGluZ3MiLCJhamF4IiwidXJsIiwiaW5jX29wdCIsImFqYXh1cmwiLCJkYXRhVHlwZSIsImFjdGlvbiIsInBhZ2VfdHlwZSIsInBhZ2VfaWQiLCJ1cmkiLCJlbmNvZGVVUkkiLCJsb2NhdGlvbiIsImhyZWYiLCJzdWNjZXNzIiwicmVzIiwiaGFuZGxlX3Njcm9sbCIsIiR3aW4iLCIkZG9jIiwiZXZ0IiwiZWwiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibGVmdCIsImJvdHRvbSIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwicmlnaHQiLCJpbm5lcldpZHRoIiwiY2xpZW50V2lkdGgiLCJvZmYiLCJ0cmlnZ2VyIiwidmFsaWRhdGVfZm9ybSIsIiRmb3JtIiwicmVxdWlyZWRzIiwiZmluZCIsImVycm9ycyIsInJlbW92ZSIsImVhY2giLCJlcnJvcl9jbGFzcyIsImF0dHIiLCJuZXh0IiwicHVzaCIsIm1hdGNoIiwidGFyZ2V0IiwiJGJ1dHRvbiIsIiRwb3B1cCIsImNsb3Nlc3QiLCJoYW5kbGUiLCJkZWxheV9pZCIsIk9wdGlucyIsInNlbGYiLCIkZmFpbHVyZSIsImwxMG4iLCJzdWJtaXRfZmFpbHVyZSIsImNsZWFyVGltZW91dCIsImZvcm0iLCJzZXJpYWxpemUiLCIkZm9ybVBhcmVudCIsImFmdGVyIiwiZXJyb3IiLCJjb21wbGV0ZSIsImNoZWNrX2lmX2luX3ZpZXciLCJ3aW5kb3dfaGVpZ2h0IiwiJHdpbmRvdyIsIndpbmRvd190b3BfcG9zaXRpb24iLCJzY3JvbGxUb3AiLCJ3aW5kb3dfYm90dG9tX3Bvc2l0aW9uIiwiJGFuaW1hdGlvbl9lbGVtZW50cyIsIiRlbGVtZW50IiwiZWxlbWVudF9oZWlnaHQiLCJvdXRlckhlaWdodCIsImVsZW1lbnRfdG9wX3Bvc2l0aW9uIiwib2Zmc2V0IiwiZWxlbWVudF9ib3R0b21fcG9zaXRpb24iLCJhZGRfcHJvcGVyX2NsYXNzZXMiLCIkcGFyZW50Iiwid2lkdGgiLCJjc3MiLCJwYWRkaW5nIiwiYmFja2dyb3VuZCIsInByZXYiLCIkY2hpbGQiLCIkYXNpZGUiLCIkZGl2IiwiJGNvbnRlbnQiLCIkY29sIiwiJHNpZGViYXIiLCIkaW1hZ2UiLCJldiIsImZuIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJnZXRfdHBsIiwibGF5b3V0X2lkIiwidGVtcGxhdGVzIiwic2hvd24iLCJoaWRkZW4iLCJsb25nX2hpZGRlbiIsImlzX2FscmVhZHlfc2hvd24iLCJwb3B1cF9pZCIsImlzX2xvbmdfaGlkZGVuIiwib3B0aW5fb2JqIiwic2hvdyIsInJlbmRlcl9wcm92aWRlcl9hcmdzIiwib3B0aW5fZGF0YSIsInByb3ZpZGVyX2FyZ3MiLCJwcm92aWRlcl9hcmdzX3RwbCIsIm9wdGluX3Byb3ZpZGVyIiwicmVuZGVyX29wdGluIiwibGF5b3V0IiwiZGVzaWduIiwiZm9ybV9sb2NhdGlvbiIsInRwbCIsIl9zaG93X2FyZ3MiLCJncm91cCIsImZvcm1fZmllbGQiLCJpbWFnZV9zdHlsZSIsImJvcmRlcnMiLCJoYXNfYXJncyIsImxpc3RlbmluZ190b19leGl0X2ludGVudCIsInBhZ2VZIiwiY2hlY2tpbmdfYWRibG9jayIsIm9wdCIsImFmdGVyX2NvbnRlbnQiLCJhbmltYXRlIiwiYW5pbWF0aW9uIiwiaXNfdXBmcm9udCIsIm9wdGluX2tleXMiLCJwb3B1cF9vcHRpbiIsInBvcHVwX29wdGluX2hhbmRsZSIsIm5ldmVyX3NlZV9hZ2FpbiIsImFkZF9uZXZlcl9zZWVfdGhpc19tZXNzYWdlIiwiYW5pbWF0aW9uX2luIiwiY2xvc2VfYnV0dG9uX2FjdHNfYXNfbmV2ZXJfc2VlX2FnYWluIiwibmV2ZXJfc2VlX2V4cGlyeSIsImFuaW1hdGlvbl9vdXQiLCJhcHBlbmRUbyIsImluc2VydEJlZm9yZSIsImNhbGwiLCJjb25zb2xlIiwibG9nIiwiaGFzQ2xhc3MiLCJoaWRlIiwiZGVmZXIiLCJzdHlsZSIsInNsaWRlaW5fb3B0aW4iLCJzbGlkZWluX29wdGluX2hhbmRsZSIsInNsaWRlX2luIiwiaGlkZV9hZnRlciIsImhpZGVfYWZ0ZXJfdW5pdCIsImhpZGVfYWZ0ZXJfdmFsIiwiJHNsaWRlX2luIiwiYWZ0ZXJfY2xvc2UiLCJpbmNfb3B0X3JlbmRlcl93aWRnZXRzIiwicmFuZG9tIiwiVXBmcm9udCJdLCJtYXBwaW5ncyI6IkFBQUEsWUFDQSxJQUFBQSxPQUFBQSxTQUNBQSxPQUFBQyxRQUNBRCxNQUFBRSxVQUNBRixNQUFBRyxVQUNBLG1CQUFBQyxXQUNBQyxFQUFBQyxPQUFBTixNQUFBRyxPQUFBQyxTQUFBRCxRQUNBLFNBQUFJLEdBRUFQLE1BQUFRLGNBQUEseUJBQ0FSLE1BQUFTLG9CQUFBLCtCQUNBVCxNQUFBVSx1QkFBQSxrQ0FDQVYsTUFBQVcseUJBQUEsOEJBRUFOLEVBQUFPLE9BQ0FDLE9BQUEsU0FBQUMsR0FDQSxNQUFBVCxHQUFBVSxVQUFBRCxHQUNBQSxFQUVBVCxFQUFBVyxTQUFBRixLQUFBLE9BQUEsUUFBQSxLQUFBRyxRQUFBSCxFQUFBSSxvQkFDQSxTQUFBSixFQUFBSSxlQUFBLE1BQUFKLEVBQUFJLGNBR0FiLEVBQUFjLFNBQUFMLEtBQ0FBLElBRUFULEVBQUFlLFlBQUFOLElBQUFULEVBQUFnQixPQUFBUCxJQUFBVCxFQUFBaUIsTUFBQVIsS0FHQUEsR0FFQVMsT0FBQSxTQUFBVCxHQUNBLFFBQUFULEVBQUFlLFlBQUFOLElBQUFULEVBQUFnQixPQUFBUCxJQUFBVCxFQUFBaUIsTUFBQVIsTUFHQVQsRUFBQWMsU0FBQUwsR0FDQSxJQUFBQSxHQUVBQSxFQUFBQSxFQUFBVSxXQUFBTixlQUNBLElBQUEsUUFBQUQsUUFBQUgsV0FFQVcsYUFBQSxTQUFBQyxFQUFBQyxF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RUF6RyxPQUFBeUssY0FBQWxGLEVBQUE2RCxFQUFBM0MsR0FHQWxCLEVBQUEzQixLQUFBQSxHQUdBMkIsRUFBQXNHLEtBQUEsdUJBQUFqSSxLQUFBNUQsTUFBQWtRLHFCQUFBekosSUFFQXBHLEVBQUE0RyxNQUFBLFdBQ0ExRyxFQUFBNEQsVUFBQXNILFFBQUEsZ0JBQUFyQyxFQUFBN0QsRUFBQWtCLEtBQ0FwRyxFQUFBZ1QsT0FBQSxFQUFBLFdBR0EsSUFBQSxFQUVBRCxLQUVBN1MsRUFBQTRELFVBQUFtQixHQUFBLGVBQUEsV0FDQThOLElBRUFFLFFBQUFuVCxPQUFBbUYsR0FBQSxtR0FBQThOLE1BSUEvTSIsImZpbGUiOiJmcm9udC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIE9wdGluID0gT3B0aW4gfHwge307XHJcbk9wdGluLlZpZXcgPSB7fTtcclxuT3B0aW4uTW9kZWxzID0ge307XHJcbk9wdGluLkV2ZW50cyA9IHt9O1xyXG5pZiggdHlwZW9mIEJhY2tib25lICE9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgXy5leHRlbmQoT3B0aW4uRXZlbnRzLCBCYWNrYm9uZS5FdmVudHMpO1xyXG4oZnVuY3Rpb24oICQgKSB7XHJcblxyXG4gICAgT3B0aW4uQ09PS0lFX1BSRUZJWCA9IFwiaW5jX29wdGluX2xvbmdfaGlkZGVuLVwiO1xyXG4gICAgT3B0aW4uUE9QVVBfQ09PS0lFX1BSRUZJWCA9IFwiaW5jX29wdGluX3BvcHVwX2xvbmdfaGlkZGVuLVwiO1xyXG4gICAgT3B0aW4uU0xJREVfSU5fQ09PS0lFX1BSRUZJWCA9IFwiaW5jX29wdGluX3NsaWRlX2luX2xvbmdfaGlkZGVuLVwiO1xyXG4gICAgT3B0aW4uU0xJREVfSU5fQ09PS0lFX0hJREVfQUxMID0gXCJpbmNfb3B0aW5fc2xpZGVfaW5faGlkZV9hbGxcIjtcclxuXHJcbiAgICBfLm1peGluKHtcclxuICAgICAgICB0b0Jvb2w6IGZ1bmN0aW9uKHZhbCl7XHJcbiAgICAgICAgICAgIGlmKCBfLmlzQm9vbGVhbih2YWwpIClcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XHJcblxyXG4gICAgICAgICAgICBpZiggXy5pc1N0cmluZyggdmFsICkgJiYgW1widHJ1ZVwiLCBcImZhbHNlXCIsIFwiMVwiXS5pbmRleE9mKCB2YWwudG9Mb3dlckNhc2UoKSApICE9PSAtMSApe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbC50b0xvd2VyQ2FzZSgpID09PSBcInRydWVcIiB8fCB2YWwudG9Mb3dlckNhc2UoKSA9PT0gXCIxXCIgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKCBfLmlzTnVtYmVyKCB2YWwgKSApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF2YWw7XHJcblxyXG4gICAgICAgICAgICBpZihfLmlzVW5kZWZpbmVkKCB2YWwgKSB8fCBfLmlzTnVsbCh2YWwpIHx8IF8uaXNOYU4oIHZhbCApICApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNUcnVlOiBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICAgaWYoIF8uaXNVbmRlZmluZWQoIHZhbCApIHx8IF8uaXNOdWxsKCB2YWwgKSB8fCBfLmlzTmFOKCB2YWwgKSApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZiggXy5pc051bWJlciggdmFsICkgKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbCAhPT0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhbCA9IHZhbC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBbJzEnLCBcInRydWVcIl0uaW5kZXhPZiggdmFsICkgIT09IC0xO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbF9iYXNlOiBmdW5jdGlvbihjaGVja2VkLCBjdXJyZW50LCBhdHRyaWJ1dGUpe1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGUgPSBfLmlzVW5kZWZpbmVkKCBhdHRyaWJ1dGUgKSA/IFwiY2hlY2tlZFwiIDogYXR0cmlidXRlO1xyXG4gICAgICAgICAgICBjaGVja2VkICA9IF8udG9Cb29sKGNoZWNrZWQpO1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gXy5pc0Jvb2xlYW4oIGNoZWNrZWQgKSA/IF8uaXNUcnVlKCBjdXJyZW50ICkgOiBjdXJyZW50O1xyXG5cclxuICAgICAgICAgICAgaWYoXy5pc0VxdWFsKGNoZWNrZWQsIGN1cnJlbnQgKSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIGF0dHJpYnV0ZSArICc9XCInICsgYXR0cmlidXRlICsnXCInO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyBjaGVja2VkPWNoZWNrIGlmIGNoZWNrZWQgdmFyaWFibGUgaXMgZXF1YWwgdG8gY3VycmVudCBzdGF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gY2hlY2tlZCBjaGVja2VkIHN0YXRlXHJcbiAgICAgICAgICogQHBhcmFtIGN1cnJlbnQgY3VycmVudCBzdGF0ZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNoZWNrZWQ6IGZ1bmN0aW9uKGNoZWNrZWQsIGN1cnJlbnQpe1xyXG4gICAgICAgICAgICByZXR1cm4gXy5jb250cm9sX2Jhc2UoIGNoZWNrZWQsIGN1cnJlbnQsIFwiY2hlY2tlZFwiICk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZWxlY3RlZDogZnVuY3Rpb24oc2VsZWN0ZWQsIGN1cnJlbnQpe1xyXG4gICAgICAgICAgICByZXR1cm4gXy5jb250cm9sX2Jhc2UoIHNlbGVjdGVkLCBjdXJyZW50LCBcInNlbGVjdGVkXCIgKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRpc2FibGVkOiBmdW5jdGlvbiggZGlzYWJsZWQsIGN1cnJlbnQgKXtcclxuICAgICAgICAgICAgcmV0dXJuIF8uY29udHJvbF9iYXNlKCBkaXNhYmxlZCwgY3VycmVudCwgXCJkaXNhYmxlZFwiICk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYoICFfLmZpbmRLZXkgKSB7XHJcbiAgICAgICAgXy5taXhpbih7XHJcbiAgICAgICAgICAgIGZpbmRLZXk6IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSBfLmtleXMob2JqKSwga2V5O1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmVkaWNhdGUob2JqW2tleV0sIGtleSwgb2JqKSkgcmV0dXJuIGtleTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWN1cnNpdmUgdG9KU09OXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgeyp9XHJcbiAgICAgKi9cclxuICAgICAgICAvL0JhY2tib25lLk1vZGVsLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyAgICB2YXIganNvbiA9IF8uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTtcclxuICAgICAgICAvLyAgICBmb3IodmFyIGF0dHIgaW4ganNvbikge1xyXG4gICAgICAgIC8vICAgICAgICBpZigoanNvblthdHRyXSBpbnN0YW5jZW9mIEJhY2tib25lLk1vZGVsKSB8fCAoanNvblthdHRyXSBpbnN0YW5jZW9mIEJhY2tib25lLkNvbGxlY3Rpb24pKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBqc29uW2F0dHJdID0ganNvblthdHRyXS50b0pTT04oKTtcclxuICAgICAgICAvLyAgICAgICAgfVxyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvLyAgICByZXR1cm4ganNvbjtcclxuICAgICAgICAvL307XHJcblxyXG5cclxuICAgIEFycmF5LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihlbGVtZW50KXtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE9mKGVsZW1lbnQpICE9PSAtMTtcclxuICAgIH07XHJcblxyXG4gICAgU3RyaW5nLnByb3RvdHlwZS50b0ludCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHRoaXMsIDEwKTtcclxuICAgIH07XHJcbiAgICBTdHJpbmcucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMubGVuZ3RoID09PSAwIHx8ICF0aGlzLnRyaW0oKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIE9wdGluLnRlbXBsYXRlID0gXy5tZW1vaXplKGZ1bmN0aW9uICggaWQgKSB7XHJcbiAgICAgICAgdmFyIGNvbXBpbGVkLFxyXG5cclxuICAgICAgICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIGV2YWx1YXRlOiAgICAvPCMoW1xcc1xcU10rPykjPi9nLFxyXG4gICAgICAgICAgICAgICAgaW50ZXJwb2xhdGU6IC9cXHtcXHtcXHsoW1xcc1xcU10rPylcXH1cXH1cXH0vZyxcclxuICAgICAgICAgICAgICAgIGVzY2FwZTogICAgICAvXFx7XFx7KFteXFx9XSs/KVxcfVxcfSg/IVxcfSkvZ1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCBkYXRhICkge1xyXG4gICAgICAgICAgICBjb21waWxlZCA9IGNvbXBpbGVkIHx8IF8udGVtcGxhdGUoICQoICcjJyArIGlkICkuaHRtbCgpLCBudWxsLCBvcHRpb25zICk7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21waWxlZCggZGF0YSApO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICBPcHRpbi5jb29raWUgPSB7XHJcbiAgICAgICAgLy8gR2V0IGEgY29va2llIHZhbHVlLlxyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIGksIGMsIGNvb2tpZV9uYW1lLCB2YWx1ZSxcclxuICAgICAgICAgICAgICAgIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XHJcblxyXG5cclxuICAgICAgICAgICAgY29va2llX25hbWUgPSBuYW1lICsgXCI9XCI7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGMgPSBjYVtpXTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PT0gJyAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEsIGMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjLmluZGV4T2YoY29va2llX25hbWUpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF92YWwgPSBjLnN1YnN0cmluZyhjb29raWVfbmFtZS5sZW5ndGgsIGMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIV92YWwgPyBfdmFsIDogSlNPTi5wYXJzZShfdmFsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBTYXZlcyB0aGUgdmFsdWUgaW50byBhIGNvb2tpZS5cclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSwgZGF5cykge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSwgZXhwaXJlcztcclxuXHJcbiAgICAgICAgICAgIHZhbHVlID0gJC5pc0FycmF5KHZhbHVlKSB8fCAkLmlzUGxhaW5PYmplY3QodmFsdWUpID8gSlNPTi5zdHJpbmdpZnkodmFsdWUpIDogdmFsdWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzTmFOKGRheXMpKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArICggZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDAgKSk7XHJcbiAgICAgICAgICAgICAgICBleHBpcmVzID0gXCI7IGV4cGlyZXM9XCIgKyBkYXRlLnRvR01UU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBleHBpcmVzID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArIFwiPVwiICsgdmFsdWUgKyBleHBpcmVzICsgXCI7IHBhdGg9L1wiO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2JsdXInLCAnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnLCBmdW5jdGlvbigpe1xyXG5cdCAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cdCAgICBpZigkdGhpcy5pcygnOmlucHV0W3R5cGU9YnV0dG9uXSwgOmlucHV0W3R5cGU9c3VibWl0XSwgOmlucHV0W3R5cGU9cmVzZXRdJykpIHJldHVybjtcclxuXHQgICAgaWYoICR0aGlzLnZhbCgpLnRyaW0oKSAhPT0gJycgKSB7XHJcblx0XHQgICAgJHRoaXMucGFyZW50KCkuYWRkQ2xhc3MoJ3dwb2ktZmlsbGVkJyk7XHJcblx0XHR9IGVsc2V7XHJcbiAgICAgICAgICAgICR0aGlzLnBhcmVudCgpLnJlbW92ZUNsYXNzKCd3cG9pLWZpbGxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIE9wdGluLk1peGlucyA9IHtcclxuICAgICAgICBfbWl4aW5zOiB7fSxcclxuICAgICAgICBfc2VydmljZXNfbWl4aW5zOiB7fSxcclxuICAgICAgICBfZGVzaW5nX21peGluczoge30sXHJcbiAgICAgICAgX2Rpc3BsYXlfbWl4aW5zOiB7fSxcclxuICAgICAgICBhZGQ6IGZ1bmN0aW9uKGlkLCBvYmope1xyXG4gICAgICAgICAgICB0aGlzLl9taXhpbnNbaWRdID0gb2JqO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0X21peGluczogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21peGlucztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZF9zZXJ2aWNlc19taXhpbjogZnVuY3Rpb24oIGlkLCBvYmogKXtcclxuICAgICAgICAgICAgdGhpcy5fc2VydmljZXNfbWl4aW5zW2lkXSA9IG9iajtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldF9zZXJ2aWNlc19taXhpbnM6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZXJ2aWNlc19taXhpbnM7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignYmx1cicsICdpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCcsIGZ1bmN0aW9uKCl7XHJcblx0ICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblx0ICAgIGlmKCR0aGlzLmlzKCc6aW5wdXRbdHlwZT1idXR0b25dLCA6aW5wdXRbdHlwZT1zdWJtaXRdLCA6aW5wdXRbdHlwZT1yZXNldF0nKSkgcmV0dXJuO1xyXG5cdCAgICBpZiggJHRoaXMudmFsKCkudHJpbSgpICE9PSAnJyApIHtcclxuXHRcdCAgICAkdGhpcy5wYXJlbnQoKS5hZGRDbGFzcygnd3BvaS1maWxsZWQnKTtcclxuXHRcdH0gZWxzZXtcclxuICAgICAgICAgICAgJHRoaXMucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ3dwb2ktZmlsbGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG4oZnVuY3Rpb24oICQsIGRvYywgd2luICkge1xyXG5cclxuICAgIHZhciB0aW1lX3RyaWdnZXIgPSBmdW5jdGlvbiggb3B0aW4sIHNldHRpbmcsIHBvcHVwICApe1xyXG4gICAgICAgIGlmKCBcImltbWVkaWF0ZWx5XCIgPT09IHNldHRpbmcudHJpZ2dlcl9vbl90aW1lICApe1xyXG4gICAgICAgICAgICBwb3B1cC5kaXNwbGF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiggXCJ0aW1lXCIgPT09IHNldHRpbmcudHJpZ2dlcl9vbl90aW1lICApe1xyXG4gICAgICAgICAgICB2YXIgdHJpZ2dlcl9vbl90aW1lX2RlbGF5O1xyXG4gICAgICAgICAgICBzd2l0Y2goICBzZXR0aW5nLmFwcGVhcl9hZnRlcl90aW1lX3VuaXQgKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtaW51dGVzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcl9vbl90aW1lX2RlbGF5ID0gcGFyc2VJbnQoIHNldHRpbmcuYXBwZWFyX2FmdGVyX3RpbWVfdmFsLCAxMCApICogNjAgKiAxMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImhvdXJzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcl9vbl90aW1lX2RlbGF5ID0gcGFyc2VJbnQoIHNldHRpbmcuYXBwZWFyX2FmdGVyX3RpbWVfdmFsLCAxMCApICogNjAgKiA2MCAqIDEwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJfb25fdGltZV9kZWxheSA9IHBhcnNlSW50KCBzZXR0aW5nLmFwcGVhcl9hZnRlcl90aW1lX3ZhbCwgMTAgKSAqIDEwMDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF8uZGVsYXkoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHBvcHVwLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgfSwgdHJpZ2dlcl9vbl90aW1lX2RlbGF5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBzY3JvbGxfdHJpZ2dlciA9IGZ1bmN0aW9uKCBvcHRpbiwgc2V0dGluZywgcG9wdXAgICl7XHJcbiAgICAgICAgaWYoIFwic2Nyb2xsZWRcIiA9PT0gc2V0dGluZy5hcHBlYXJfYWZ0ZXIgICl7XHJcbiAgICAgICAgICAgICQod2luKS5zY3JvbGwoXy5kZWJvdW5jZSggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmKCAoICB3aW4ucGFnZVlPZmZzZXQgKiAxMDAgLyAkKGRvYykuaGVpZ2h0KCkgKSA+PSBwYXJzZUludCggc2V0dGluZy5hcHBlYXJfYWZ0ZXJfcGFnZV9wb3J0aW9uX3ZhbCwgMTAgKSApXHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAuZGlzcGxheSgpO1xyXG5cclxuICAgICAgICAgICAgfSwgNTApICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiggXCJzZWxlY3RvclwiID09PSBzZXR0aW5nLmFwcGVhcl9hZnRlciAgKXtcclxuICAgICAgICAgICAgdmFyICRlbCA9ICQoIHNldHRpbmcuYXBwZWFyX2FmdGVyX2VsZW1lbnRfdmFsICk7XHJcbiAgICAgICAgICAgIGlmKCAkZWwubGVuZ3RoICl7XHJcbiAgICAgICAgICAgICAgICAkKHdpbikuc2Nyb2xsKF8uZGVib3VuY2UoIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIHdpbi5wYWdlWU9mZnNldCA+PSAkZWwucG9zaXRpb24oKS50b3AgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5kaXNwbGF5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgNTApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIGNsaWNrX3RyaWdnZXIgPSBmdW5jdGlvbiggb3B0aW4sIHNldHRpbmcsIHBvcHVwICl7XHJcbiAgICAgICAgaWYoIFwiXCIgIT09ICQudHJpbSggc2V0dGluZy50cmlnZ2VyX29uX2VsZW1lbnRfY2xpY2sgKSAgKXtcclxuICAgICAgICAgICAgdmFyICRjbGlja2FibGUgPSAkKCAkLnRyaW0oIHNldHRpbmcudHJpZ2dlcl9vbl9lbGVtZW50X2NsaWNrICkgKTtcclxuICAgICAgICAgICAgaWYoICRjbGlja2FibGUubGVuZ3RoIClcclxuICAgICAgICAgICAgICAgICQoZG9jKS5vbiggXCJjbGlja1wiLCAkLnRyaW0oIHNldHRpbmcudHJpZ2dlcl9vbl9lbGVtZW50X2NsaWNrICksICBwb3B1cC5kaXNwbGF5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENsaWNrYWJsZSBidXR0b24gYWRkZWQgd2l0aCBzaG9ydGNvZGVcclxuICAgICAgICAgKi9cclxuICAgICAgICAkKGRvYykub24oXCJjbGlja1wiLCBcIi5pbmNfb3B0X2h1c3RsZV9zaG9ydGNvZGVfdHJpZ2dlclwiLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiggJCh0aGlzKS5kYXRhKFwiaWRcIikgPT0gb3B0aW4uZGF0YS5vcHRpbl9pZCAmJiAkKHRoaXMpLmRhdGEoXCJ0eXBlXCIpID09IFwicG9wdXBcIiApXHJcbiAgICAgICAgICAgICAgICBwb3B1cC5kaXNwbGF5KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBleGl0X2ludGVudF90cmlnZ2VyID0gZnVuY3Rpb24oIG9wdGluLCBzZXR0aW5nLCBwb3B1cCAgKXtcclxuICAgICAgICBpZihfLmlzVHJ1ZSggc2V0dGluZy50cmlnZ2VyX29uX2V4aXQgICkgKXtcclxuICAgICAgICAgICAgT3B0aW4ubGlzdGVuX3RvX2V4aXRfaW50ZW5kKCk7XHJcbiAgICAgICAgICAgICQoZG9jKS5vbihcIndwb2k6ZXhpdF9pbnRlbmRlZFwiLCBwb3B1cC5kaXNwbGF5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB2YXIgYWRibG9ja190cmlnZ2VyID0gZnVuY3Rpb24oIG9wdGluLCBzZXR0aW5nLCBwb3B1cCAgKSB7XHJcbiAgICAgICAgaWYoXy5pc1RydWUoIHNldHRpbmcudHJpZ2dlcl9vbl9hZGJsb2NrICkgKXtcclxuXHJcbiAgICAgICAgICAgIGlmKCAhT3B0aW4uaXNfYWRibG9ja19lbmFibGVkKCkgKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiggICFfLmlzVHJ1ZSggc2V0dGluZy50cmlnZ2VyX29uX2FkYmxvY2tfdGltZWQgKSApe1xyXG4gICAgICAgICAgICAgICAgcG9wdXAuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHZhciB0cmlnZ2VyX29uX2FkYmxvY2tfZGVsYXk7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2goICBzZXR0aW5nLnRyaWdnZXJfb25fYWRibG9ja190aW1lZF91bml0ICl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1pbnV0ZXNcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcl9vbl9hZGJsb2NrX2RlbGF5ID0gcGFyc2VJbnQoIHNldHRpbmcudHJpZ2dlcl9vbl9hZGJsb2NrX3RpbWVkX3ZhbCwgMTAgKSAqIDYwICogMTAwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImhvdXJzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJfb25fYWRibG9ja19kZWxheSA9IHBhcnNlSW50KCBzZXR0aW5nLnRyaWdnZXJfb25fYWRibG9ja190aW1lZF92YWwsIDEwICkgKiA2MCAqIDYwICogMTAwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcl9vbl9hZGJsb2NrX2RlbGF5ID0gcGFyc2VJbnQoIHNldHRpbmcudHJpZ2dlcl9vbl9hZGJsb2NrX3RpbWVkX3ZhbCwgMTAgKSAqIDEwMDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgXy5kZWxheShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0sIHRyaWdnZXJfb25fYWRibG9ja19kZWxheSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBPcHRpbi5UcmlnZ2VycyA9IHtcclxuICAgICAgICB0aW1lOiB0aW1lX3RyaWdnZXIsXHJcbiAgICAgICAgc2Nyb2xsOiBzY3JvbGxfdHJpZ2dlcixcclxuICAgICAgICBzY3JvbGxlZDogc2Nyb2xsX3RyaWdnZXIsXHJcbiAgICAgICAgY2xpY2s6IGNsaWNrX3RyaWdnZXIsXHJcbiAgICAgICAgZXhpdF9pbnRlbnQ6IGV4aXRfaW50ZW50X3RyaWdnZXIsXHJcbiAgICAgICAgYWRibG9jazogYWRibG9ja190cmlnZ2VyXHJcbiAgICB9O1xyXG5cclxufShqUXVlcnksIGRvY3VtZW50LCB3aW5kb3cpKTsiLCIoZnVuY3Rpb24oICQgKSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2cgb3B0aW4gdmlldyB3aGVuIGl0J3MgYmVpbmcgdmlld2VkXHJcbiAgICAgKi9cclxuICAgICQoZG9jdW1lbnQpLm9uKFwid3BvaTpkaXNwbGF5XCIsIGZ1bmN0aW9uIChlLCB0eXBlLCAkb3B0aW4sIG9wdGluKSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIExvZyBudW1iZXIgb2YgdGltZXMgdGhpcyBvcHRpbiB0eXBlIGhhcyBiZWVuIHNob3duIHNvIGZhclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YXIgayA9ICd3cG9pLW9wdGluLXt0eXBlfS1zaG93bi1jb3VudC0nLnJlcGxhY2UoXCJ7dHlwZX1cIiwgdHlwZSkgICsgb3B0aW4uZGF0YS5vcHRpbl9pZCxcclxuICAgICAgICAgICAgcHJldl9zaG93bl9jb3VudCA9IE9wdGluLmNvb2tpZS5nZXQoIGsgKSB8fCAwLFxyXG4gICAgICAgICAgICBpc190ZXN0ID0gdHlwZSAmJiBvcHRpbi5zZXR0aW5nc1t0eXBlXS5pc190ZXN0O1xyXG5cclxuICAgICAgICBpZiggIWlzX3Rlc3QgKVxyXG4gICAgICAgICAgICBPcHRpbi5jb29raWUuc2V0KCBrICwgcHJldl9zaG93bl9jb3VudCArIDEgLCAzMCApO1xyXG5cclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgdXJsOiBpbmNfb3B0LmFqYXh1cmwsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBcImluY19vcHRfb3B0aW5fdmlld2VkXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW5faWQ6IG9wdGluLmRhdGEub3B0aW5faWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZV90eXBlOiBpbmNfb3B0LnBhZ2VfdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlX2lkOiBpbmNfb3B0LnBhZ2VfaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICB1cmk6IGVuY29kZVVSSSggd2luZG93LmxvY2F0aW9uLmhyZWYgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7fVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG59KGpRdWVyeSkpOyIsIihmdW5jdGlvbiggJCApIHtcclxuICAgIE9wdGluID0gT3B0aW4gfHwge307XHJcbiAgICBPcHRpbi5oYW5kbGVfc2Nyb2xsID0gZnVuY3Rpb24oICRlbCwgdHlwZSwgb3B0aW4gKXtcclxuICAgICAgICB2YXIgJHdpbiA9ICAkKHdpbmRvdyksXHJcbiAgICAgICAgICAgICRkb2MgPSAkKGRvY3VtZW50KTtcclxuXHJcbiAgICAgICAgJHdpbi5vbignc2Nyb2xsJywgXy5kZWJvdW5jZSggZnVuY3Rpb24gKGV2dCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGVsID0gJGVsWzBdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHJlY3QudG9wID49IDAgJiZcclxuICAgICAgICAgICAgICAgIHJlY3QubGVmdCA+PSAwICYmXHJcbiAgICAgICAgICAgICAgICByZWN0LmJvdHRvbSA8PSAod2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpICYmIC8qb3IgJCh3aW5kb3cpLmhlaWdodCgpICovXHJcbiAgICAgICAgICAgICAgICByZWN0LnJpZ2h0IDw9ICh3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpIC8qb3IgJCh3aW5kb3cpLndpZHRoKCkgKi9cclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAkd2luLm9mZihldnQpO1xyXG4gICAgICAgICAgICAgICAgJGVsLmFkZENsYXNzKFwid3BvaS1zaG93XCIpO1xyXG4gICAgICAgICAgICAgICAgJGRvYy50cmlnZ2VyKFwid3BvaTpkaXNwbGF5XCIsIFt0eXBlLCAkZWwsIG9wdGluIF0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0sIDUsIHRydWUpICk7XHJcblxyXG4gICAgfVxyXG5cclxufShqUXVlcnkpKTsiLCIoZnVuY3Rpb24oICQgKSB7XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlX2Zvcm0oICRmb3JtLCBpc190ZXN0ICl7XHJcbiAgICAgICAgdmFyIHJlcXVpcmVkcyA9ICRmb3JtLmZpbmQoXCIucmVxdWlyZWRcIiksXHJcbiAgICAgICAgICAgICRpY29uID0gJCgnPGkgY2xhc3M9XCJ3cG9pLWljb24gaS1lcnJvclwiPjwvaT4nKSxcclxuICAgICAgICAgICAgZXJyb3JzID0gW107XHJcbiAgICAgICAgJCgnLndwb2ktZmllbGQtZXJyb3InKS5yZW1vdmUoKTtcclxuICAgICAgICByZXF1aXJlZHMuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JfY2xhc3MgPSAkdGhpcy5hdHRyKFwibmFtZVwiKSArIFwiX1wiICsgXCJlcnJvclwiO1xyXG5cclxuICAgICAgICAgICAgaWYoIGlzX3Rlc3QgKXtcclxuICAgICAgICAgICAgICAgIC8vJGljb24gPSAkaWNvbi5jbG9uZSgpLmFkZENsYXNzKCBlcnJvcl9jbGFzcyApLmF0dHIoXCJ0aXRsZVwiLCBpbmNfb3B0LmwxMG4udGVzdF9jYW50X3N1Ym1pdCApO1xyXG4gICAgICAgICAgICAgICAgLy8kdGhpcy5hZnRlciggJGljb24gKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLm5leHQoJ2xhYmVsJykuZmluZCgnaS53cG9pLWljb24nKS5hZGRDbGFzcygnaS1lcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goICR0aGlzICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3JzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiggXy5pc0VtcHR5KCB0aGlzLnZhbHVlICkgfHwgKCAkdGhpcy5pcyhcIlt0eXBlPSdlbWFpbCddXCIpICYmICF0aGlzLnZhbHVlLnRyaW0oKS5tYXRjaCggL15bXFxTXStcXEBbYS16QS1aMC05XStcXC5bXFxTXXsyLH0kL2dpICkgKSApe1xyXG4gICAgICAgICAgICAgICAgLy8kaWNvbiA9ICRpY29uLmNsb25lKCkuYWRkQ2xhc3MoIGVycm9yX2NsYXNzICkuYXR0cihcInRpdGxlXCIsICR0aGlzLmRhdGEoXCJlcnJvclwiKSApO1xyXG4gICAgICAgICAgICAgICAgLy8kdGhpcy5uZXh0KCdsYWJlbCcpLmZpbmQoJ2kuaS1lbWFpbCcpLmFmdGVyKCRpY29uKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLm5leHQoJ2xhYmVsJykuZmluZCgnaS53cG9pLWljb24nKS5hZGRDbGFzcygnaS1lcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goICR0aGlzICk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgJChcIi5cIiArIGVycm9yX2NsYXNzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGVycm9ycy5sZW5ndGggPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oXCJzdWJtaXRcIiwgJy5pbmNfb3B0aW4gZm9ybScsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciAkZm9ybSA9ICQoZS50YXJnZXQpLFxyXG4gICAgICAgICAgICAkYnV0dG9uID0gJGZvcm0uZmluZChcImJ1dHRvblwiKSxcclxuICAgICAgICAgICAgJHBvcHVwID0gJGZvcm0uY2xvc2VzdCggJy5pbmNfb3B0aW4nKSxcclxuICAgICAgICAgICAgaGFuZGxlID0gJHBvcHVwLmRhdGEoICdoYW5kbGUnKSxcclxuICAgICAgICAgICAgZGVsYXlfaWQgPSAkcG9wdXAuZGF0YShcImRlbGF5X2lkXCIpLFxyXG4gICAgICAgICAgICBvcHRpbiA9IE9wdGluc1sgaGFuZGxlIF0sXHJcbiAgICAgICAgICAgIHNlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICAkd3JhcCA9ICQodGhpcykuY2xvc2VzdCgnLndwb2ktb3B0aW4gPiAud3BvaS1jb250YWluZXInKSxcclxuICAgICAgICAgICAgdHlwZSA9ICRmb3JtLmNsb3Nlc3QoXCIuaW5jX29wdGluXCIpLmRhdGEoXCJ0eXBlXCIpLFxyXG4gICAgICAgICAgICBpc190ZXN0ID0gdHlwZSAmJiBvcHRpbi5zZXR0aW5nc1t0eXBlXS5pc190ZXN0LFxyXG4gICAgICAgICAgICBnZXRfc3VjY2Vzc19tZXNzYWdlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcHRpbi5kZXNpZ24uc3VjY2Vzc19tZXNzYWdlLnJlcGxhY2UoXCJ7bmFtZX1cIiwgb3B0aW4uZGF0YS5vcHRpbl9uYW1lKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJGZhaWx1cmUgPSAkKFwiPHNwYW4gY2xhc3M9J3dwb2ktc3VibWl0LWZhaWx1cmUnPlwiICsgaW5jX29wdC5sMTBuLnN1Ym1pdF9mYWlsdXJlICsgIFwiPC9zcGFuPlwiKVxyXG4gICAgICAgICAgICA7XHJcblxyXG5cclxuICAgICAgICAkZm9ybS5wYXJlbnQoKS5maW5kKCcud3BvaS1zdWJtaXQtZmFpbHVyZScpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICBpZiggIV8uaXNVbmRlZmluZWQoIGRlbGF5X2lkICkgKVxyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoIGRlbGF5X2lkICk7XHJcblxyXG4gICAgICAgIGlmKCAkZm9ybS5kYXRhKFwic2VuZGluZ1wiKSB8fCAhdmFsaWRhdGVfZm9ybSggJGZvcm0sIGlzX3Rlc3QgKSApIHJldHVybjtcclxuXHJcbiAgICAgICAgJGJ1dHRvbi5hdHRyKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgJGJ1dHRvbi5hZGRDbGFzcyhcImxvYWRpbmdcIik7XHJcbiAgICAgICAgJGZvcm0uYWRkQ2xhc3MoXCJsb2FkaW5nXCIpO1xyXG5cclxuICAgICAgICAkZm9ybS5kYXRhKFwic2VuZGluZ1wiLCB0cnVlKTtcclxuXHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIHVybDogaW5jX29wdC5hamF4dXJsLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbjogXCJpbmNfb3B0X3N1Ym1pdF9vcHRfaW5cIixcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtOiAkZm9ybS5zZXJpYWxpemUoKSxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpbl9pZDogb3B0aW4uZGF0YS5vcHRpbl9pZCxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlX3R5cGU6IGluY19vcHQucGFnZV90eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VfaWQ6IGluY19vcHQucGFnZV9pZCxcclxuICAgICAgICAgICAgICAgICAgICB1cmk6IGVuY29kZVVSSSggd2luZG93LmxvY2F0aW9uLmhyZWYgKSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICBpZiggcmVzICYmIHJlcy5zdWNjZXNzICl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8kZm9ybS5odG1sKCBcIlwiICk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICRmb3JtUGFyZW50ID0gJGZvcm0uY2xvc2VzdChcIi53cG9pLWh1c3RsZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyRmb3JtUGFyZW50LmZpbmQoXCIud3BvaS1mb3JtLXRpdGxlXCIpLmZhZGVPdXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJGZvcm1QYXJlbnQuZmluZChcIi53cG9pLXN1Y2Nlc3MtbWVzc2FnZVwiKS5hZGRDbGFzcyhcIndwb2ktc2hvdy1tZXNzYWdlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZGVsYXkoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChzZWxmKS5jbG9zZXN0KFwiLmluY19vcHRpblwiKS5maW5kKFwiLmluYy1vcHQtY2xvc2UtcG9wdXBcIikudHJpZ2dlcihcImNsaWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgJGZvcm0uYWZ0ZXIoICRmYWlsdXJlICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJGZvcm0uYWZ0ZXIoICRmYWlsdXJlICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJGJ1dHRvbi5hdHRyKFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgJGZvcm0ucmVtb3ZlQ2xhc3MoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgJGJ1dHRvbi5yZW1vdmVDbGFzcyhcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAkZm9ybS5kYXRhKFwic2VuZGluZ1wiLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG59KGpRdWVyeSkpOyIsInZhciBPcHRpbiA9IE9wdGluIHx8IHt9O1xyXG4oZnVuY3Rpb24oICQsIGRvYyApIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgJC5lYWNoKFsnc2hvdycsICdoaWRlJ10sIGZ1bmN0aW9uIChpLCBldikge1xyXG4gICAgICAgIHZhciBlbCA9ICQuZm5bZXZdO1xyXG4gICAgICAgICQuZm5bZXZdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoZXYpO1xyXG4gICAgICAgICAgICByZXR1cm4gZWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IG9wdGluIGlkIGZyb20gdGhlIGh0bWwgdGVtcGxhdGVcclxuICAgICAqL1xyXG5cclxuICAgIE9wdGluLmdldF90cGwgPSBmdW5jdGlvbiggbGF5b3V0X2lkICl7XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlcyA9IFtcIm9wdGluLWxheW91dC1vbmVcIiwgXCJvcHRpbi1sYXlvdXQtdHdvXCIsIFwib3B0aW4tbGF5b3V0LXRocmVlXCIsIFwib3B0aW4tbGF5b3V0LWZvdXJcIl07XHJcbiAgICAgICAgcmV0dXJuIE9wdGluLnRlbXBsYXRlKCB0ZW1wbGF0ZXNbIGxheW91dF9pZCBdICk7XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgT3B0aW4ucG9wdXAgPSB7XHJcbiAgICAgICAgc2hvd246W10sXHJcbiAgICAgICAgaGlkZGVuOltdLFxyXG4gICAgICAgIGxvbmdfaGlkZGVuOiBbXSxcclxuICAgICAgICBpc19hbHJlYWR5X3Nob3duOiBmdW5jdGlvbiggcG9wdXBfaWQgKXtcclxuICAgICAgICAgICAgcmV0dXJuIC0xICE9PSB0aGlzLnNob3duLmluZGV4T2YoIHBvcHVwX2lkICk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpc19sb25nX2hpZGRlbjogZnVuY3Rpb24ob3B0aW5fb2JqKXtcclxuICAgICAgICAgICAgcmV0dXJuICEhT3B0aW4uY29va2llLmdldCggT3B0aW4uUE9QVVBfQ09PS0lFX1BSRUZJWCArIG9wdGluX29iai5pZCApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2hvdzogZnVuY3Rpb24oIG9wdGluX29iaiApe1xyXG5cclxuICAgICAgICAgICAgaWYoIHRoaXMuaXNfbG9uZ19oaWRkZW4oIG9wdGluX29iaiApIClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmKCAhdGhpcy5pc19hbHJlYWR5X3Nob3duKCBvcHRpbl9vYmouaWQgKSAgIClcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcHRpbl9vYmouc2hvdygpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHBvc3RzL3BhZ2VzIGJvdW5jZSBpbiBhbmltYXRpb25cclxuICAgIHZhciAkYW5pbWF0aW9uX2VsZW1lbnRzID0gJCgnLmluY19vcHRfaW5saW5lX3dyYXAnKTtcclxuICAgIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNoZWNrX2lmX2luX3ZpZXcoKSB7XHJcbiAgICAgICAgdmFyIHdpbmRvd19oZWlnaHQgPSAkd2luZG93LmhlaWdodCgpO1xyXG4gICAgICAgIHZhciB3aW5kb3dfdG9wX3Bvc2l0aW9uID0gJHdpbmRvdy5zY3JvbGxUb3AoKTtcclxuICAgICAgICB2YXIgd2luZG93X2JvdHRvbV9wb3NpdGlvbiA9ICh3aW5kb3dfdG9wX3Bvc2l0aW9uICsgd2luZG93X2hlaWdodCk7XHJcblxyXG4gICAgICAgICQuZWFjaCgkYW5pbWF0aW9uX2VsZW1lbnRzLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyICRlbGVtZW50ID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnRfaGVpZ2h0ID0gJGVsZW1lbnQub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnRfdG9wX3Bvc2l0aW9uID0gJGVsZW1lbnQub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudF9ib3R0b21fcG9zaXRpb24gPSAoZWxlbWVudF90b3BfcG9zaXRpb24gKyBlbGVtZW50X2hlaWdodCk7XHJcblxyXG4gICAgICAgICAgICAvL2NoZWNrIHRvIHNlZSBpZiB0aGlzIGN1cnJlbnQgY29udGFpbmVyIGlzIHdpdGhpbiB2aWV3cG9ydFxyXG4gICAgICAgICAgICBpZiAoKGVsZW1lbnRfYm90dG9tX3Bvc2l0aW9uID49IHdpbmRvd190b3BfcG9zaXRpb24pICYmXHJcbiAgICAgICAgICAgICAgICAoZWxlbWVudF90b3BfcG9zaXRpb24gPD0gd2luZG93X2JvdHRvbV9wb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKCdpbi12aWV3Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcygnaW4tdmlldycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkX3Byb3Blcl9jbGFzc2VzKGUsIHR5cGUsICRwb3B1cCwgZGF0YSl7XHJcblxyXG4gICAgICAgIGlmKGUudHlwZSA9PT0gXCJ3cG9pOmRpc3BsYXlcIiAmJiB0eXBlID09PSBcInBvcHVwXCIgKXtcclxuICAgICAgICAgICAgKGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgdmFyICRwYXJlbnQgPSB0eXBlID09PSBcInBvcHVwXCIgPyAkKHdpbmRvdykgOiAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzID0gJHBvcHVwLmZpbmQoXCIud3BvaS1odXN0bGVcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoICRwYXJlbnQud2lkdGgoKSA8PSA0MDUpe1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoXCIud3BvaS1vcHRpblwiKS5hZGRDbGFzcyhcIndwb2ktc21hbGxcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoXCIud3BvaS1vcHRpblwiKS5yZW1vdmVDbGFzcyhcIndwb2ktc21hbGxcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCAoICRwYXJlbnQud2lkdGgoKSA8PSA1ODUpICYmICgkcGFyZW50LndpZHRoKCkgPiA0MDUpICl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZChcIi53cG9pLW9wdGluXCIpLmFkZENsYXNzKFwid3BvaS1tZWRpdW1cIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoXCIud3BvaS1vcHRpblwiKS5yZW1vdmVDbGFzcyhcIndwb2ktbWVkaXVtXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KCkpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAkKFwiLndwb2ktaHVzdGxlXCIpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHZhciAkcGFyZW50ID0gdHlwZSA9PT0gXCJwb3B1cFwiID8gJCh3aW5kb3cpIDogJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoICRwYXJlbnQud2lkdGgoKSA8PSA0MDUpe1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoXCIud3BvaS1vcHRpblwiKS5hZGRDbGFzcyhcIndwb2ktc21hbGxcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoXCIud3BvaS1vcHRpblwiKS5yZW1vdmVDbGFzcyhcIndwb2ktc21hbGxcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCAoICRwYXJlbnQud2lkdGgoKSA8PSA1ODUpICYmICgkcGFyZW50LndpZHRoKCkgPiA0MDUpICl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZChcIi53cG9pLW9wdGluXCIpLmFkZENsYXNzKFwid3BvaS1tZWRpdW1cIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoXCIud3BvaS1vcHRpblwiKS5yZW1vdmVDbGFzcyhcIndwb2ktbWVkaXVtXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoXCIud3BvaS1tY2ctc2VsZWN0XCIpLmVhY2goZnVuY3Rpb24oKXtcclxuXHQgICAgICAgICQodGhpcykucGFyZW50KFwiLndwb2ktcHJvdmlkZXItYXJncyA+IC53cG9pLWNvbnRhaW5lciA+IC53cG9pLWVsZW1lbnQ6bnRoLWNoaWxkKDIpID4gLndwb2ktY29udGFpbmVyID4gLndwb2ktZWxlbWVudFwiKS5jc3Moe1wicGFkZGluZ1wiOlwiMFwiLFwiYmFja2dyb3VuZFwiOlwidHJhbnNwYXJlbnRcIn0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExheW91dCAjM1xyXG4gICAgICAgIC8vIFNldCBoZWlnaHQgb2YgaW1hZ2UgY29udGFpbmVyIHNhbWUgdG8gcGFyZW50IGRpdlxyXG4gICAgICAgIC8vIFRoaXMgdG8gYXZvaWQgU2FmYXJpIGNvbmZsaWN0cyB3aXRoIFsgaGVpZ2h0OiAxMDAlIF1cclxuICAgICAgICAkKFwiLndwb2ktbGF5b3V0LXRocmVlIC53cG9pLW9wdGluOm5vdCgud3BvaS1zbWFsbCkgLm5vY29udGVudDpub3QoLm5vaW1hZ2UpXCIpLmVhY2goZnVuY3Rpb24oKXtcclxuXHQgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcblx0ICAgICAgICBcdCRwYXJlbnQgPSAkdGhpcy5maW5kKFwiLndwb2ktYXNpZGUteFwiKS5wcmV2KFwiLndwb2ktZWxlbWVudFwiKSxcclxuXHQgICAgICAgIFx0JGNoaWxkID0gJHRoaXMuZmluZChcIi53cG9pLWFzaWRlLXhcIikucHJldihcIi53cG9pLWVsZW1lbnRcIikuZmluZChcIi53cG9pLWNvbnRhaW5lci53cG9pLWNvbFwiKTtcclxuXHQgICAgICAgICRjaGlsZC5jc3MoXCJoZWlnaHRcIiwgJHBhcmVudC5oZWlnaHQoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTGF5b3V0ICMzXHJcbiAgICAgICAgLy8gVmVydGljYWwgYWxpZ24gY29udGVudFxyXG4gICAgICAgICQoXCIud3BvaS1sYXlvdXQtdGhyZWUgLndwb2ktb3B0aW46bm90KC53cG9pLXNtYWxsKSA+IC53cG9pLWNvbnRhaW5lci5ub2ltYWdlOm5vdCgubm9jb250ZW50KVwiKS5lYWNoKGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxyXG5cdCAgICAgICAgXHQkYXNpZGUgPSAkdGhpcy5maW5kKFwiLndwb2ktYXNpZGUteFwiKSxcclxuXHQgICAgICAgIFx0JGRpdiA9ICR0aGlzLmZpbmQoXCIud3BvaS1pbWFnZVwiKS5uZXh0KFwiLndwb2ktZWxlbWVudFwiKSxcclxuXHQgICAgICAgIFx0JGVsZW1lbnQgPSAkYXNpZGUucHJldihcIi53cG9pLWVsZW1lbnRcIiksXHJcblx0ICAgICAgICBcdCRjb250ZW50ID0gJHRoaXMuZmluZChcIi53cG9pLWNvbnRlbnRcIiksXHJcblx0ICAgICAgICBcdCRjb2wgPSAkZWxlbWVudC5maW5kKFwiLndwb2ktY29sXCIpLFxyXG5cdCAgICAgICAgXHQkZm9ybSA9ICR0aGlzLmZpbmQoXCJmb3JtXCIpO1xyXG5cdCAgICAgICAgXHJcblx0ICAgICAgICBpZiAoICRmb3JtLmhlaWdodCgpID4gJGNvbnRlbnQuaGVpZ2h0KCkgKXtcclxuXHRcdCAgICAgICAgJGNvbC5jc3MoXCJoZWlnaHRcIiwgJGFzaWRlLmhlaWdodCgpICsgJ3B4JyApO1xyXG5cdFx0ICAgICAgICAkZGl2LmFkZENsYXNzKFwid3BvaS1hbGlnblwiKTtcclxuXHRcdCAgICAgICAgJGNvbnRlbnQuYWRkQ2xhc3MoXCJ3cG9pLWFsaWduLWVsZW1lbnRcIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBpZiAoICRmb3JtLmhlaWdodCgpIDwgJGNvbnRlbnQuaGVpZ2h0KCkgKXtcclxuXHRcdCAgICAgICAgJGFzaWRlLmNzcyhcImhlaWdodFwiLCAkZWxlbWVudC5oZWlnaHQoKSArICdweCcpO1xyXG5cdFx0ICAgICAgICAkYXNpZGUuYWRkQ2xhc3MoXCJ3cG9pLWFsaWduXCIpO1xyXG5cdFx0ICAgICAgICAkZm9ybS5hZGRDbGFzcyhcIndwb2ktYWxpZ24tZWxlbWVudFwiKTtcclxuXHQgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKFwiLndwb2ktbGF5b3V0LXRocmVlIC53cG9pLW9wdGluOm5vdCgud3BvaS1zbWFsbCkgPiAud3BvaS1jb250YWluZXI6bm90KC5ub2ltYWdlKTpub3QoLm5vY29udGVudClcIikuZWFjaChmdW5jdGlvbigpe1xyXG5cdCAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcclxuXHQgICAgICAgIFx0JHNpZGViYXIgPSAkdGhpcy5maW5kKFwiLndwb2ktYXNpZGUteFwiKSxcclxuXHQgICAgICAgIFx0JGVsZW1lbnQgPSAkc2lkZWJhci5wcmV2KFwiLndwb2ktZWxlbWVudFwiKSxcclxuXHQgICAgICAgIFx0JGZvcm0gPSAkdGhpcy5maW5kKFwiZm9ybVwiKTtcclxuXHQgICAgICAgIFxyXG5cdCAgICAgICAgaWYgKCAkZm9ybS5oZWlnaHQoKSA8ICRlbGVtZW50LmhlaWdodCgpICl7XHJcblx0XHQgICAgICAgICRzaWRlYmFyLmNzcyhcImhlaWdodFwiLCAkZWxlbWVudC5oZWlnaHQoKSk7XHJcblx0XHQgICAgICAgICRzaWRlYmFyLmFkZENsYXNzKFwid3BvaS1hbGlnblwiKTtcclxuXHRcdCAgICAgICAgJGZvcm0uYWRkQ2xhc3MoXCJ3cG9pLWFsaWduLWVsZW1lbnRcIik7XHJcblx0ICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTGF5b3V0ICM0XHJcbiAgICAgICAgLy8gVmVydGljYWwgYWxpZ24gY29udGVudFxyXG4gICAgICAgICQoXCIud3BvaS1sYXlvdXQtZm91ciAud3BvaS1vcHRpbjpub3QoLndwb2ktc21hbGwpID4gLndwb2ktY29udGFpbmVyLm5vaW1hZ2U6bm90KC5ub2NvbnRlbnQpXCIpLmVhY2goZnVuY3Rpb24oKXtcclxuXHQgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcblx0ICAgICAgICBcdCRhc2lkZSA9ICR0aGlzLmZpbmQoXCIud3BvaS1hc2lkZS14bFwiKSxcclxuXHQgICAgICAgIFx0JGNvbCA9ICR0aGlzLmZpbmQoXCIud3BvaS1hc2lkZS14bCA+IC53cG9pLWNvbnRhaW5lclwiKSxcclxuXHQgICAgICAgIFx0JHBhcmVudCA9ICRhc2lkZS5maW5kKFwiLndwb2ktZm9ybVwiKSxcclxuXHQgICAgICAgIFx0JGZvcm0gPSAkYXNpZGUuZmluZChcImZvcm1cIiksXHJcblx0ICAgICAgICBcdCRlbGVtZW50ID0gJGFzaWRlLm5leHQoXCIud3BvaS1lbGVtZW50XCIpLFxyXG5cdCAgICAgICAgXHQkY29udGVudCA9ICRlbGVtZW50LmZpbmQoXCIud3BvaS1jb250ZW50XCIpO1xyXG5cdCAgICAgICAgXHJcblx0ICAgICAgICBpZiAoICRjb250ZW50LmhlaWdodCgpID4gJGZvcm0uaGVpZ2h0KCkgKXtcclxuXHRcdCAgICAgICAgJGNvbC5jc3MoXCJoZWlnaHRcIiwgJGFzaWRlLmhlaWdodCgpICsgJ3B4Jyk7XHJcblx0XHQgICAgICAgICRwYXJlbnQuYWRkQ2xhc3MoXCJ3cG9pLWFsaWduXCIpO1xyXG5cdFx0ICAgICAgICAkZm9ybS5hZGRDbGFzcyhcIndwb2ktYWxpZ24tZWxlbWVudFwiKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGlmICggJGNvbnRlbnQuaGVpZ2h0KCkgPCAkZm9ybS5oZWlnaHQoKSApIHtcclxuXHRcdCAgICAgICAgJGVsZW1lbnQuY3NzKFwiaGVpZ2h0XCIsICRjb2wuaGVpZ2h0KCkgKyAncHgnKTtcclxuXHRcdCAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MoXCJ3cG9pLWFsaWduXCIpO1xyXG5cdFx0ICAgICAgICAkY29udGVudC5hZGRDbGFzcyhcIndwb2ktYWxpZ24tZWxlbWVudFwiKTtcclxuXHQgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKFwiLndwb2ktbGF5b3V0LWZvdXIgLndwb2ktb3B0aW46bm90KC53cG9pLXNtYWxsKSA+IC53cG9pLWNvbnRhaW5lcjpub3QoLm5vaW1hZ2UpOm5vdCgubm9jb250ZW50KVwiKS5lYWNoKGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxyXG5cdCAgICAgICAgXHQkYXNpZGUgPSAkdGhpcy5maW5kKFwiLndwb2ktYXNpZGUteGxcIiksXHJcblx0ICAgICAgICBcdCRjb2wgPSAkdGhpcy5maW5kKFwiLndwb2ktYXNpZGUteGwgPiAud3BvaS1jb250YWluZXJcIiksXHJcblx0ICAgICAgICBcdCRpbWFnZSA9ICR0aGlzLmZpbmQoXCIud3BvaS1pbWFnZVwiKSxcclxuXHQgICAgICAgIFx0JHBhcmVudCA9ICRhc2lkZS5maW5kKFwiLndwb2ktZm9ybVwiKSxcclxuXHQgICAgICAgIFx0JGZvcm0gPSAkYXNpZGUuZmluZChcImZvcm1cIiksXHJcblx0ICAgICAgICBcdCRlbGVtZW50ID0gJGFzaWRlLm5leHQoXCIud3BvaS1lbGVtZW50XCIpLFxyXG5cdCAgICAgICAgXHQkY29udGVudCA9ICR0aGlzLmZpbmQoXCIud3BvaS1jb250ZW50XCIpO1xyXG5cdCAgICAgICAgXHJcblx0ICAgICAgICBpZiAoICRjb250ZW50LmhlaWdodCgpID4gJGNvbC5oZWlnaHQoKSApe1xyXG5cdFx0ICAgICAgICAkY29sLmNzcyhcImhlaWdodFwiLCAkYXNpZGUuaGVpZ2h0KCkgKyAncHgnKTtcclxuXHRcdCAgICAgICAgJHBhcmVudC5jc3MoXCJoZWlnaHRcIiwgJGNvbC5oZWlnaHQoKSAtICRpbWFnZS5oZWlnaHQoKSApO1xyXG5cdFx0ICAgICAgICAkcGFyZW50LmFkZENsYXNzKFwid3BvaS1hbGlnblwiKTtcclxuXHRcdCAgICAgICAgJGZvcm0uYWRkQ2xhc3MoXCJ3cG9pLWFsaWduLWVsZW1lbnRcIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICBpZiAoICRjb250ZW50LmhlaWdodCgpIDwgJGNvbC5oZWlnaHQoKSApIHtcclxuXHRcdCAgICAgICAgJGVsZW1lbnQuY3NzKFwiaGVpZ2h0XCIsICRhc2lkZS5oZWlnaHQoKSArICdweCcpO1xyXG5cdFx0ICAgICAgICAkZWxlbWVudC5hZGRDbGFzcyhcIndwb2ktYWxpZ25cIik7XHJcblx0XHQgICAgICAgICRjb250ZW50LmFkZENsYXNzKFwid3BvaS1hbGlnbi1lbGVtZW50XCIpO1xyXG5cdCAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICQoZG9jKS5vbihcIndwb2k6ZGlzcGxheVwiLCBfLmRlYm91bmNlKGFkZF9wcm9wZXJfY2xhc3NlcywgNTAsIGZhbHNlKSk7XHJcbiAgICAkKHdpbmRvdykub24oXCJyZXNpemVcIiwgXy5kZWJvdW5jZSggYWRkX3Byb3Blcl9jbGFzc2VzLCA1MCwgZmFsc2UgKSApO1xyXG5cclxuICAgICR3aW5kb3cub24oJ3Njcm9sbCByZXNpemUnLCBfLmRlYm91bmNlKCBjaGVja19pZl9pbl92aWV3LCA1MCwgZmFsc2UgKSApO1xyXG4gICAgJHdpbmRvdy50cmlnZ2VyKCdzY3JvbGwnKTtcclxuICAgIFxyXG4gICAgJChkb2N1bWVudCkub24oJ2JsdXInLCAnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnLCBmdW5jdGlvbigpe1xyXG5cdCAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cdCAgICBpZigkdGhpcy5pcygnOmlucHV0W3R5cGU9YnV0dG9uXSwgOmlucHV0W3R5cGU9c3VibWl0XSwgOmlucHV0W3R5cGU9cmVzZXRdJykpIHJldHVybjtcclxuXHQgICAgaWYoJHRoaXMudmFsKCkudHJpbSgpICE9PSAnJykge1xyXG5cdFx0ICAgICR0aGlzLnBhcmVudCgpLmFkZENsYXNzKCd3cG9pLWZpbGxlZCcpO1xyXG5cdFx0fSBlbHNle1xyXG4gICAgICAgICAgICAkdGhpcy5wYXJlbnQoKS5yZW1vdmVDbGFzcygnd3BvaS1maWxsZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignZm9jdXMnLCAnLndwb2ktb3B0aW4gaW5wdXQucmVxdWlyZWQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICQodGhpcykubmV4dCgnbGFiZWwnKS5maW5kKCdpLndwb2ktaWNvbicpLnJlbW92ZUNsYXNzKCdpLWVycm9yJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlcnMgcHJvdmlkZXIgYXJncyBhbmQgcmV0dXJucyBodG1sXHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBzaW5jZSAxLjAuMVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvcHRpbl9kYXRhXHJcbiAgICAgKiBAcmV0dXJuIGh0bWxcclxuICAgICAqL1xyXG4gICAgT3B0aW4ucmVuZGVyX3Byb3ZpZGVyX2FyZ3MgPSBmdW5jdGlvbiggb3B0aW5fZGF0YSApe1xyXG4gICAgICAgIGlmKCBfLmlzRW1wdHkoIG9wdGluX2RhdGEucHJvdmlkZXJfYXJncyApICkgcmV0dXJuIFwiXCI7XHJcblxyXG4gICAgICAgIHZhciBwcm92aWRlcl9hcmdzX3RwbCA9IE9wdGluLnRlbXBsYXRlKCBcIm9wdGluLVwiICsgb3B0aW5fZGF0YS5kYXRhLm9wdGluX3Byb3ZpZGVyICsgXCItYXJnc1wiICApO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcl9hcmdzX3RwbCggb3B0aW5fZGF0YS5wcm92aWRlcl9hcmdzIClcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXJzIG9wdGluIGZyb250IGxheW91dCBiYXNlZCBvbiBnaXZlIG9wdGluX2RhdGFcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb3B0aW5fZGF0YVxyXG4gICAgICovXHJcbiAgICBPcHRpbi5yZW5kZXJfb3B0aW4gPSBmdW5jdGlvbiggb3B0aW5fZGF0YSApe1xyXG4gICAgICAgIHZhciBsYXlvdXQgPSBvcHRpbl9kYXRhLmRlc2lnbi5mb3JtX2xvY2F0aW9uLnRvSW50KCksXHJcbiAgICAgICAgICAgIHRwbCA9IE9wdGluLmdldF90cGwoIGxheW91dCApLFxyXG4gICAgICAgICAgICBfc2hvd19hcmdzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmKCBcIm1haWxjaGltcFwiID09PSBvcHRpbl9kYXRhLmRhdGEub3B0aW5fcHJvdmlkZXJcclxuICAgICAgICAgICAgICAgICAgICAmJiBvcHRpbl9kYXRhLnByb3ZpZGVyX2FyZ3NcclxuICAgICAgICAgICAgICAgICAgICAmJiBvcHRpbl9kYXRhLnByb3ZpZGVyX2FyZ3MuZ3JvdXBcclxuICAgICAgICAgICAgICAgICAgICAmJiBcImhpZGRlblwiICE9PSBvcHRpbl9kYXRhLnByb3ZpZGVyX2FyZ3MuZ3JvdXAuZm9ybV9maWVsZFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBodG1sID0gdHBsKF8uZXh0ZW5kKHtcclxuICAgICAgICAgICAgICAgIGltYWdlX3N0eWxlOiBcIlwiXHJcbiAgICAgICAgICAgIH0sIG9wdGluX2RhdGEuZGVzaWduLCBvcHRpbl9kYXRhLmRlc2lnbi5ib3JkZXJzLCBvcHRpbl9kYXRhLmRhdGEsIHtcclxuICAgICAgICAgICAgICAgIGhhc19hcmdzOiBfc2hvd19hcmdzKClcclxuICAgICAgICAgICAgfSkgKTtcclxuXHJcbiAgICAgICAgJChkb2MpLnRyaWdnZXIoXCJ3cG9pOmxheW91dDpyZW5kZXJlZFwiKTtcclxuICAgICAgICByZXR1cm4gaHRtbDtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGxpc3RlbmluZ190b19leGl0X2ludGVudCA9IGZhbHNlO1xyXG4gICAgT3B0aW4ubGlzdGVuX3RvX2V4aXRfaW50ZW5kID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgaWYoIGxpc3RlbmluZ190b19leGl0X2ludGVudCApIHJldHVybjtcclxuXHJcbiAgICAgICAgJChkb2MpLm9uKFwibW91c2VsZWF2ZVwiLCBfLmRlYm91bmNlKCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgaWYoIGUucGFnZVkgPD0gMCApXHJcbiAgICAgICAgICAgICAgICAkKGRvYykudHJpZ2dlcihcIndwb2k6ZXhpdF9pbnRlbmRlZFwiLCBlKTtcclxuICAgICAgICAgICAgfSwgNTAsIHRydWVcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGxpc3RlbmluZ190b19leGl0X2ludGVudCA9IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBjaGVja2luZ19hZGJsb2NrID0gZmFsc2U7XHJcbiAgICBPcHRpbi5pc19hZGJsb2NrX2VuYWJsZWQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKCBjaGVja2luZ19hZGJsb2NrICkgcmV0dXJuO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy92YXIgJHNjcmlwdCA9ICQoJzxzY3JpcHQgc3JjPVwie3VybH1cIiB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI+PC9zY3JpcHQ+Jy5yZXBsYWNlKFwie3VybH1cIiwgaW5jX29wdC5hZGJsb2NrX2RldGVjdG9yX2pzKSApO1xyXG4gICAgICAgIC8vJHNjcmlwdC5hcHBlbmRUbyggXCJib2R5XCIgKTtcclxuXHJcbiAgICAgICAgaWYoICQoXCIjaHVzdGxlX29wdGluX2FkQmxvY2tfZGV0ZWN0b3JcIikubGVuZ3RoICl7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjaGVja2luZ19hZGJsb2NrID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbn0oalF1ZXJ5LCBkb2N1bWVudCkpO1xyXG4iLCIoZnVuY3Rpb24oICQgKSB7XHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciBpbmxpbmUgb3B0aW5zICggYWZ0ZXJfY29udGVudCApXHJcbiAgICAgKi9cclxuICAgICQoXCIuaW5jX29wdF9hZnRlcl9jb250ZW50X3dyYXBcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgaWQgPSAkdGhpcy5kYXRhKFwiaWRcIik7XHJcblxyXG4gICAgICAgIGlmKCAhaWQgKSByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBvcHRpbiA9IF8uZmluZChPcHRpbnMsIGZ1bmN0aW9uIChvcHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkID09IG9wdC5kYXRhLm9wdGluX2lkO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKCFvcHRpbikgcmV0dXJuO1xyXG5cclxuICAgICAgICAkdGhpcy5kYXRhKFwiaGFuZGxlXCIsIF8uZmluZEtleShPcHRpbnMsIG9wdGluKSk7XHJcbiAgICAgICAgJHRoaXMuZGF0YShcInR5cGVcIiwgXCJhZnRlcl9jb250ZW50XCIpO1xyXG5cclxuICAgICAgICBpZiAoICFfLmlzVHJ1ZSggb3B0aW4uc2V0dGluZ3MuYWZ0ZXJfY29udGVudC5kaXNwbGF5ICkgKSByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBodG1sID0gT3B0aW4ucmVuZGVyX29wdGluKCBvcHRpbiApO1xyXG4gICAgICAgIE9wdGluLmhhbmRsZV9zY3JvbGwoICR0aGlzLCBcImFmdGVyX2NvbnRlbnRcIiwgb3B0aW4gKTtcclxuXHJcbiAgICAgICAgJHRoaXMuaHRtbChodG1sKTtcclxuICAgICAgICAvLyBhZGQgcHJvdmlkZXIgYXJnc1xyXG4gICAgICAgICR0aGlzLmZpbmQoXCIud3BvaS1wcm92aWRlci1hcmdzXCIpLmh0bWwoIE9wdGluLnJlbmRlcl9wcm92aWRlcl9hcmdzKCBvcHRpbiApICApO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS50cmlnZ2VyKFwid3BvaTpkaXNwbGF5XCIsIFtcImFmdGVyX2NvbnRlbnRcIiwgJHRoaXMsIG9wdGluIF0pO1xyXG5cclxuICAgICAgICBpZiAob3B0aW4uc2V0dGluZ3MuYWZ0ZXJfY29udGVudC5hbmltYXRlICYmIG9wdGluLnNldHRpbmdzLmFmdGVyX2NvbnRlbnQuYW5pbWF0ZSA9PSBcInRydWVcIikge1xyXG4gICAgICAgICAgICAkdGhpcy5hZGRDbGFzcyhvcHRpbi5zZXR0aW5ncy5hZnRlcl9jb250ZW50LmFuaW1hdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59KGpRdWVyeSkpOyIsIlwidXNlIHN0cmljdFwiO1xyXG4oZnVuY3Rpb24oICQsIGRvYywgd2luICkge1xyXG4gICAgaWYoIGluY19vcHQuaXNfdXBmcm9udCApIHJldHVybjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFByYXBhcmUgYW5kIHNob3cgb3B0aW4gcG9wdXAgKHdlIHdpbGwgdGFrZSB0aGUgZmlyc3Qgb3B0aW4gdGhhdCBoYXMgdGhlIHB1cHVwIGVudmlyb25tZW50IGVuYWJsZWQsIG9yIGluIHRlc3QgbW9kZSBBTkQgc2V0IHRvIGRpc3BsYXkpXHJcbiAgICAgKi9cclxuICAgIHZhciBvcHRpbl9rZXlzID0gXy5rZXlzKE9wdGlucyk7XHJcbiAgICB2YXIgcG9wdXBfb3B0aW4gPSBmYWxzZTtcclxuICAgIHZhciBwb3B1cF9vcHRpbl9oYW5kbGUgPSBmYWxzZTtcclxuICAgICQuZWFjaCggb3B0aW5fa2V5cywgZnVuY3Rpb24oaSwgayl7XHJcbiAgICAgICAgdmFyIG9wdCA9IE9wdGluc1sgayBdO1xyXG5cclxuICAgICAgICBpZiggXy5pc1RydWUoIG9wdC5zZXR0aW5ncy5wb3B1cC5kaXNwbGF5ICkgJiYgIV8uaXNUcnVlKCBPcHRpbi5jb29raWUuZ2V0KCBPcHRpbi5QT1BVUF9DT09LSUVfUFJFRklYICsgb3B0LmRhdGEub3B0aW5faWQgKSApICApIHtcclxuXHJcbiAgICAgICAgICAgIHBvcHVwX29wdGluX2hhbmRsZSA9IGs7XHJcbiAgICAgICAgICAgIHBvcHVwX29wdGluID0gT3B0aW5zWyBwb3B1cF9vcHRpbl9oYW5kbGUgXTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIGlmKCBwb3B1cF9vcHRpbiAhPSBmYWxzZSApIHtcclxuICAgICAgICB2YXIgaHRtbCA9IE9wdGluLnJlbmRlcl9vcHRpbiggcG9wdXBfb3B0aW4gKTtcclxuXHJcbiAgICAgICAgdmFyIG5ldmVyX3NlZV9hZ2FpbiA9IF8uaXNUcnVlKCAgcG9wdXBfb3B0aW4uc2V0dGluZ3MucG9wdXAuYWRkX25ldmVyX3NlZV90aGlzX21lc3NhZ2UgKSA/ICc8ZGl2IGNsYXNzPVwid3BvaS1uc2FcIj48YSBjbGFzcz1cImluY19vcHRfbmV2ZXJfc2VlX2FnYWluXCI+JXM8L2E+PC9kaXY+Jy5yZXBsYWNlKFwiJXNcIiwgaW5jX29wdC5sMTBuLm5ldmVyX3NlZV9hZ2FpbiApIDogXCJcIjtcclxuICAgICAgICB2YXIgcG9wdXAgPSAkKCAnPGRpdiBjbGFzcyA9IFwiaW5jX29wdF9wb3B1cCB3cG9pLWFuaW1hdGUgaW5jX29wdGluIGluY19vcHRpbl8nICsgcG9wdXBfb3B0aW4uZGF0YS5vcHRpbl9pZCArICdcIj48YSBocmVmPVwiI1wiIGFyaWEtbGFiZWw9XCJDbG9zZVwiIGNsYXNzPVwiaW5jLW9wdC1jbG9zZS1wb3B1cFwiPiZ0aW1lczs8L2E+JyArIGh0bWwgKyBuZXZlcl9zZWVfYWdhaW4gKyc8L2Rpdj4nKTtcclxuICAgICAgICAvLyBhZGQgcHJvdmlkZXIgYXJnc1xyXG4gICAgICAgIHBvcHVwLmZpbmQoXCIud3BvaS1wcm92aWRlci1hcmdzXCIpLmh0bWwoIE9wdGluLnJlbmRlcl9wcm92aWRlcl9hcmdzKCBwb3B1cF9vcHRpbiApICApO1xyXG5cclxuICAgICAgICBpZiggcG9wdXBfb3B0aW4uc2V0dGluZ3MucG9wdXAuYW5pbWF0aW9uX2luICl7XHJcbiAgICAgICAgICAgIHBvcHVwLmFkZENsYXNzKCBwb3B1cF9vcHRpbi5zZXR0aW5ncy5wb3B1cC5hbmltYXRpb25faW4gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBvcHVwLmRhdGEoXCJoYW5kbGVcIiwgcG9wdXBfb3B0aW5faGFuZGxlKTtcclxuXHJcblxyXG4gICAgICAgIHBvcHVwLm9uKCBcImhpZGVcIiwgZnVuY3Rpb24oICl7XHJcbiAgICAgICAgICAgIE9wdGluLnBvcHVwLmhpZGRlbi5wdXNoKCBwb3B1cF9vcHRpbi5kYXRhLm9wdGluX2lkKTtcclxuICAgICAgICAgICAgT3B0aW4ucG9wdXAubG9uZ19oaWRkZW4ucHVzaCggcG9wdXBfb3B0aW4uZGF0YS5vcHRpbl9pZCApO1xyXG4gICAgICAgICAgICBfLmRlbGF5KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkKCcud3BvaS1vdmVybGF5LW1hc2snKS5yZW1vdmVDbGFzcyhcIndwb2ktc2hvd1wiKTtcclxuICAgICAgICAgICAgICAgIHBvcHVwLnJlbW92ZUNsYXNzKFwid3BvaS1zaG93XCIpO1xyXG4gICAgICAgICAgICB9LCA3NTApO1xyXG4gICAgICAgICAgICBpZiggXy5pc1RydWUoIHBvcHVwX29wdGluLnNldHRpbmdzLnBvcHVwLmNsb3NlX2J1dHRvbl9hY3RzX2FzX25ldmVyX3NlZV9hZ2FpbiApIClcclxuICAgICAgICAgICAgICAgIE9wdGluLmNvb2tpZS5zZXQoIE9wdGluLlBPUFVQX0NPT0tJRV9QUkVGSVggKyBwb3B1cF9vcHRpbi5kYXRhLm9wdGluX2lkLCAgcG9wdXBfb3B0aW4uZGF0YS5vcHRpbl9pZCwgcGFyc2VJbnQoIHBvcHVwX29wdGluLnNldHRpbmdzLnBvcHVwLm5ldmVyX3NlZV9leHBpcnksIDEwICkgKTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgYW4gSW4gYW5pbWF0aW9uLCB3ZSBzaG91bGQgc3dhcCB0aGUgYW5pbWF0aW9ucyByaWdodCBhZnRlciB0aGUgT1VUIGVuZHNcclxuICAgICAgICAgICAgaWYoIHBvcHVwX29wdGluLnNldHRpbmdzLnBvcHVwLmFuaW1hdGlvbl9pbiApe1xyXG4gICAgICAgICAgICAgICAgaWYoIHBvcHVwX29wdGluLnNldHRpbmdzLnBvcHVwLmFuaW1hdGlvbl9vdXQgKXtcclxuICAgICAgICAgICAgICAgICAgICBfLmRlbGF5KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnJlbW92ZUNsYXNzKCBwb3B1cF9vcHRpbi5zZXR0aW5ncy5wb3B1cC5hbmltYXRpb25fb3V0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLmFkZENsYXNzKCBwb3B1cF9vcHRpbi5zZXR0aW5ncy5wb3B1cC5hbmltYXRpb25faW4gKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAzNTApO1xyXG4gICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwLmFkZENsYXNzKCBwb3B1cF9vcHRpbi5zZXR0aW5ncy5wb3B1cC5hbmltYXRpb25faW4gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJChkb2N1bWVudCkudHJpZ2dlcihcIndwb2k6aGlkZVwiLCBbXCJwb3B1cFwiLCBwb3B1cCwgcG9wdXAuZGF0YShcInBvcHVwXCIpIF0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBzdG9yZSB0aGUgaGFuZGxlIGludG8gcG9wdXBcclxuICAgICAgICBwb3B1cC5kYXRhKFwiaGFuZGxlXCIsIHBvcHVwX29wdGluX2hhbmRsZSk7XHJcbiAgICAgICAgcG9wdXAuZGF0YShcInBvcHVwXCIsIHBvcHVwX29wdGluKTtcclxuICAgICAgICBwb3B1cC5kYXRhKFwidHlwZVwiLCBcInBvcHVwXCIpO1xyXG5cclxuICAgICAgICBwb3B1cC5hcHBlbmRUbyggXCJib2R5XCIgKTtcclxuXHJcbiAgICAgICAgcG9wdXAuZGlzcGxheSA9ICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYoIHBvcHVwLmlzKFwiLndwb2ktc2hvd1wiKSApIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHBvcHVwLnJlbW92ZUNsYXNzKCBwb3B1cF9vcHRpbi5zZXR0aW5ncy5wb3B1cC5hbmltYXRpb25fb3V0ICk7XHJcblxyXG4gICAgICAgICAgICBpZiggISQocG9wdXApLnByZXYoXCIud3BvaS1vdmVybGF5LW1hc2tcIikubGVuZ3RoIClcclxuICAgICAgICAgICAgICAgICQoJzxkaXYgY2xhc3M9XCJpbmNfb3B0aW5fJyArIHBvcHVwX29wdGluLmRhdGEub3B0aW5faWQgKyAnIHdwb2ktb3ZlcmxheS1tYXNrIHdwb2ktYW5pbWF0ZSBmYWRlaW5cIj48ZGl2IGNsYXNzPVwid3BvaS1wb3B1cC1vdmVybGF5XCI+PC9kaXY+PC9kaXY+JykuaW5zZXJ0QmVmb3JlKHBvcHVwKS5hZGRDbGFzcyhcIndwb2ktc2hvd1wiKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcG9wdXAucHJldihcIi53cG9pLW92ZXJsYXktbWFza1wiKS5hZGRDbGFzcyhcIndwb2ktc2hvd1wiKTtcclxuXHJcbiAgICAgICAgICAgIF8uZGVsYXkoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHBvcHVwLmFkZENsYXNzKFwid3BvaS1zaG93XCIpO1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhbiBPVVQgYW5pbWF0aW9uLCB3ZSBzaG91bGQgc3dhcCB0aGUgYW5pbWF0aW9ucyByaWdodCBhZnRlciB0aGUgSU4gZW5kc1xyXG4gICAgICAgICAgICAgICAgaWYoIHBvcHVwX29wdGluLnNldHRpbmdzLnBvcHVwLmFuaW1hdGlvbl9vdXQgKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiggcG9wdXBfb3B0aW4uc2V0dGluZ3MucG9wdXAuYW5pbWF0aW9uX2luICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZGVsYXkoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLnJlbW92ZUNsYXNzKCBwb3B1cF9vcHRpbi5zZXR0aW5ncy5wb3B1cC5hbmltYXRpb25faW4gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwLmFkZENsYXNzKCBwb3B1cF9vcHRpbi5zZXR0aW5ncy5wb3B1cC5hbmltYXRpb25fb3V0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDM1MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cC5hZGRDbGFzcyggcG9wdXBfb3B0aW4uc2V0dGluZ3MucG9wdXAuYW5pbWF0aW9uX291dCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sIDc1MCk7XHJcblxyXG4gICAgICAgICAgICAkKGRvY3VtZW50KS50cmlnZ2VyKFwid3BvaTpkaXNwbGF5XCIsIFtcInBvcHVwXCIsIHBvcHVwLCBwb3B1cC5kYXRhKFwicG9wdXBcIikgXSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVHJpZ2dlcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBpZiggdHlwZW9mIE9wdGluLlRyaWdnZXJzWyBwb3B1cF9vcHRpbi5zZXR0aW5ncy5wb3B1cC5hcHBlYXJfYWZ0ZXJdID09PSBcImZ1bmN0aW9uXCIgKVxyXG4gICAgICAgICAgICBPcHRpbi5UcmlnZ2Vyc1sgcG9wdXBfb3B0aW4uc2V0dGluZ3MucG9wdXAuYXBwZWFyX2FmdGVyXS5jYWxsKCBudWxsLCBwb3B1cF9vcHRpbiwgcG9wdXBfb3B0aW4uc2V0dGluZ3MucG9wdXAsIHBvcHVwICk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggXCJIdXN0bGU6W1BvcHVwXSBObyB0cmlnZ2VyIGRlZmluZWQgZm9yIFwiLiBwb3B1cF9vcHRpbi5zZXR0aW5ncy5wb3B1cC5hcHBlYXJfYWZ0ZXIgKTtcclxuICAgICB9XHJcblxyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgJy5pbmMtb3B0LWNsb3NlLXBvcHVwLCAud3BvaS1vdmVybGF5LW1hc2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJChlLnRhcmdldCksXHJcbiAgICAgICAgICAgICRwb3B1cCA9ICR0aGlzLmNsb3Nlc3QoICcuaW5jX29wdGluJyk7XHJcbiAgICAgICAgaWYoJCh0aGlzKS5oYXNDbGFzcygnd3BvaS1vdmVybGF5LW1hc2snKSkgJHBvcHVwID0gJCh0aGlzKS5uZXh0KCAnLmluY19vcHRpbicpO1xyXG4gICAgICAgICRwb3B1cC5yZW1vdmVDbGFzcyhcIndwb2ktc2hvd1wiKTtcclxuICAgICAgICAkcG9wdXAudHJpZ2dlcignaGlkZScpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYWtlIHN1cmUgYWxsIGNvbnRlbnRzIGFyZSBiZWluZyBoaWRkZW4gaWYgcG9wdXAgZG9lc24ndCBoYXZlIGFueSBhbmltYXRpb25fb3V0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaWYoICFwb3B1cF9vcHRpbi5zZXR0aW5ncy5wb3B1cC5hbmltYXRpb25fb3V0ICl7XHJcbiAgICAgICAgICAgICRwb3B1cC5oaWRlKCk7XHJcbiAgICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIC8vIGxldHMgbWFrZSBzdXJlIHdlIGFyZSBub3QgbWVzc2luZyB3aXRoIHN0eWxlIGRpc3BsYXkgc28gdGhhdCBhbmltYXRpb24gd2lsbCB3b3JrIGxhdGVyIG9uXHJcbiAgICAgICAgICAgICAgICAoICRwb3B1cFswXS5zdHlsZSB8fCB7fSApLmRpc3BsYXkgPSBcIlwiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcIi5pbmNfb3B0X25ldmVyX3NlZV9hZ2FpblwiLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgT3B0aW4uY29va2llLnNldCggT3B0aW4uUE9QVVBfQ09PS0lFX1BSRUZJWCArIHBvcHVwX29wdGluLmRhdGEub3B0aW5faWQsICBwb3B1cF9vcHRpbi5kYXRhLm9wdGluX2lkLCBwYXJzZUludCggcG9wdXBfb3B0aW4uc2V0dGluZ3MucG9wdXAubmV2ZXJfc2VlX2V4cGlyeSwgMTAgKSApO1xyXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLmluY19vcHRfcG9wdXAnKS5maW5kKFwiLmluYy1vcHQtY2xvc2UtcG9wdXBcIikudHJpZ2dlcihcImNsaWNrXCIpO1xyXG4gICAgfSk7XHJcblxyXG5cclxufShqUXVlcnksIGRvY3VtZW50LCB3aW5kb3cpKTsiLCJcInVzZSBzdHJpY3RcIjtcclxuKGZ1bmN0aW9uKCAkLCBkb2MsIHdpbiApIHtcclxuICAgIGlmKCBpbmNfb3B0LmlzX3VwZnJvbnQgKSByZXR1cm47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEb24ndCBkbyBhbnl0aGluZyBpZiBzbGlkZSBpbiBpcyBoaWRlIGFsbCFcclxuICAgICAqL1xyXG4gICAgaWYoIF8uaXNUcnVlKCBPcHRpbi5jb29raWUuZ2V0KCBPcHRpbi5TTElERV9JTl9DT09LSUVfSElERV9BTEwgKSApICApXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJhcGFyZSBhbmQgc2hvdyBvcHRpbiBzbGlkZWluICh3ZSB3aWxsIHRha2UgdGhlIGZpcnN0IG9wdGluIHRoYXQgaGFzIHRoZSBzbGlkZWluIGVudmlyb25tZW50IGVuYWJsZWQgb3IgaW4gdGVzdCBtb2RlIEFORCBzZXQgdG8gZGlzcGxheSlcclxuICAgICAqL1xyXG4gICAgdmFyIG9wdGluX2tleXMgPSBfLmtleXMoT3B0aW5zKTtcclxuICAgIHZhciBzbGlkZWluX29wdGluID0gZmFsc2U7XHJcbiAgICB2YXIgc2xpZGVpbl9vcHRpbl9oYW5kbGUgPSBmYWxzZTtcclxuXHJcbiAgICAkLmVhY2goIG9wdGluX2tleXMsIGZ1bmN0aW9uKGksIGspe1xyXG4gICAgICAgIHZhciBvcHQgPSBPcHRpbnNbIGsgXTtcclxuICAgICAgICBpZiggXy5pc1RydWUoIG9wdC5zZXR0aW5ncy5zbGlkZV9pbi5kaXNwbGF5ICkgJiYgIV8uaXNUcnVlKCBPcHRpbi5jb29raWUuZ2V0KCBPcHRpbi5TTElERV9JTl9DT09LSUVfUFJFRklYICsgb3B0LmRhdGEub3B0aW5faWQgKSApICApIHtcclxuICAgICAgICAgICAgc2xpZGVpbl9vcHRpbl9oYW5kbGUgPSBrO1xyXG4gICAgICAgICAgICBzbGlkZWluX29wdGluID0gb3B0O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmKCBzbGlkZWluX29wdGluICE9IGZhbHNlICkge1xyXG4gICAgICAgIHZhciBodG1sID0gT3B0aW4ucmVuZGVyX29wdGluKCBzbGlkZWluX29wdGluICk7XHJcblxyXG4gICAgICAgIHZhciBuZXZlcl9zZWVfYWdhaW4gPSBfLmlzVHJ1ZSggIHNsaWRlaW5fb3B0aW4uc2V0dGluZ3Muc2xpZGVfaW4uYWRkX25ldmVyX3NlZV90aGlzX21lc3NhZ2UgKSA/ICc8ZGl2IGNsYXNzPVwid3BvaS1uc2FcIj48YSBjbGFzcz1cImluY19vcHRfbmV2ZXJfc2VlX2FnYWluXCI+JXM8L2E+PC9kaXY+Jy5yZXBsYWNlKFwiJXNcIiwgaW5jX29wdC5sMTBuLm5ldmVyX3NlZV9hZ2FpbiApIDogXCJcIjtcclxuICAgICAgICB2YXIgc2xpZGVfaW4gPSAkKCAnPGRpdiBjbGFzcz1cImluY19vcHRfc2xpZGVpbiBpbmNfb3B0X3NsaWRlaW5fJysgc2xpZGVpbl9vcHRpbi5zZXR0aW5ncy5zbGlkZV9pbi5wb3NpdGlvbiArJyBpbmNfb3B0aW4gaW5jX29wdGluXycrc2xpZGVpbl9vcHRpbi5kYXRhLm9wdGluX2lkKycgd3BvaS1zbGlkZVwiPjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJpbmMtb3B0LWNsb3NlLXBvcHVwXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCIgPiZ0aW1lczs8L2E+JyArIGh0bWwgKyBuZXZlcl9zZWVfYWdhaW4gKyc8L2Rpdj4nKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIHByb3ZpZGVyIGFyZ3NcclxuICAgICAgICBzbGlkZV9pbi5maW5kKFwiLndwb2ktcHJvdmlkZXItYXJnc1wiKS5odG1sKCBPcHRpbi5yZW5kZXJfcHJvdmlkZXJfYXJncyggc2xpZGVpbl9vcHRpbiApICApO1xyXG5cclxuICAgICAgICBzbGlkZV9pbi5kYXRhKFwiaGFuZGxlXCIsIHNsaWRlaW5fb3B0aW5faGFuZGxlKTtcclxuXHJcbiAgICAgICAgc2xpZGVfaW4ub24oXCJzaG93XCIsIGZ1bmN0aW9uKCl7IC8vICBvbiBzaG93IGxvZyB2aWV3XHJcbiAgICAgICAgICAgIE9wdGluLnBvcHVwLnNob3duLnB1c2goIHNsaWRlX2luLmlkICk7XHJcblxyXG4gICAgICAgICAgICBpZiggXy5pc1RydWUoIHNsaWRlaW5fb3B0aW4uc2V0dGluZ3Muc2xpZGVfaW4uaGlkZV9hZnRlciApICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlbGF5ID0gc2xpZGVpbl9vcHRpbi5zZXR0aW5ncy5zbGlkZV9pbi5oaWRlX2FmdGVyX3VuaXQgPT09IFwibWludXRlc1wiID9cclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KCBzbGlkZWluX29wdGluLnNldHRpbmdzLnNsaWRlX2luLmhpZGVfYWZ0ZXJfdmFsLCAxMCApICogNjAgKiAxMDAwIDpcclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KCBzbGlkZWluX29wdGluLnNldHRpbmdzLnNsaWRlX2luLmhpZGVfYWZ0ZXJfdmFsLCAxMCApICogMTAwMDtcclxuICAgICAgICAgICAgICAgIHZhciBkZWxheV9pZCA9IF8uZGVsYXkoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiggIXNsaWRlX2luLmRhdGEoJ3ByZXZlbnRfaGlkZV9hZnRlcicpICkgLy8gaWYgaGlkZSBhZnRlciBpcyBub3QgcHJldmVudGVkLCB0aGVuIGhpZGUgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVfaW4ucmVtb3ZlQ2xhc3MoXCJ3cG9pLXNob3dcIik7XHJcbiAgICAgICAgICAgICAgICB9LCBkZWxheSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2xpZGVfaW4uZGF0YShcImRlbGF5X2lkXCIsIGRlbGF5X2lkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gc3RvcmUgdGhlIGhhbmRsZSBpbnRvIHBvcHVwXHJcbiAgICAgICAgc2xpZGVfaW4uZGF0YShcImhhbmRsZVwiLCBzbGlkZWluX29wdGluX2hhbmRsZSk7XHJcbiAgICAgICAgc2xpZGVfaW4uZGF0YShcInBvcHVwXCIsIHNsaWRlaW5fb3B0aW4pO1xyXG4gICAgICAgIHNsaWRlX2luLmRhdGEoXCJ0eXBlXCIsIFwic2xpZGVfaW5cIik7XHJcblxyXG4gICAgICAgIHNsaWRlX2luLm9uKFwiaGlkZVwiLCBmdW5jdGlvbiggKXtcclxuICAgICAgICAgICAgdmFyICRzbGlkZV9pbiA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBzbGlkZV9pbiA9ICRzbGlkZV9pbi5kYXRhKFwicG9wdXBcIik7XHJcblxyXG4gICAgICAgICAgICBpZiggXCJoaWRlX2FsbFwiID09PSBzbGlkZV9pbi5zZXR0aW5ncy5zbGlkZV9pbi5hZnRlcl9jbG9zZSApIHtcclxuICAgICAgICAgICAgICAgIE9wdGluLmNvb2tpZS5zZXQoIE9wdGluLlNMSURFX0lOX0NPT0tJRV9ISURFX0FMTCwgc2xpZGVfaW4uZGF0YS5vcHRpbl9pZCwgMzAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoIFwibm9fc2hvd1wiID09PSBzbGlkZV9pbi5zZXR0aW5ncy5zbGlkZV9pbi5hZnRlcl9jbG9zZSApIHtcclxuICAgICAgICAgICAgICAgIE9wdGluLmNvb2tpZS5zZXQoIE9wdGluLlNMSURFX0lOX0NPT0tJRV9QUkVGSVggKyBzbGlkZV9pbi5kYXRhLm9wdGluX2lkLCAgc2xpZGVfaW4uZGF0YS5vcHRpbl9pZCwgMzAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJChkb2N1bWVudCkudHJpZ2dlcihcIndwb2k6aGlkZVwiLCBbXCJzbGlkZV9pblwiLCAkc2xpZGVfaW4sIHNsaWRlX2luXSk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICBzbGlkZV9pbi5hcHBlbmRUbyggXCJib2R5XCIgKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJldmVudCBoaWRlIGFmdGVyIGlmIHVzZXIgY2xpY2tzIG9uIHNsaWRlIGluXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKi9cclxuICAgICAgICBzbGlkZV9pbi5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNsaWRlX2luLmRhdGEoXCJwcmV2ZW50X2hpZGVfYWZ0ZXJcIiwgdHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNsaWRlX2luLmRpc3BsYXkgPSAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmKCBzbGlkZV9pbi5pcyhcIi53cG9pLXNob3dcIikgfHwgc2xpZGVfaW4uaXMoXCIud3BvaS1zaG93blwiKSApIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHNsaWRlX2luLmFkZENsYXNzKFwid3BvaS1zaG93XCIpO1xyXG4gICAgICAgICAgICBzbGlkZV9pbi5hZGRDbGFzcyhcIndwb2ktc2hvd25cIik7IC8vIHF1aWNrIGZpeCB0byBhdm9pZCBzaG93aW5nIHRoZSBzbGlkZWluIHNldmVyYWwgdGltZXNcclxuICAgICAgICAgICAgc2xpZGVfaW4uc2hvdygpO1xyXG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGFuIE9VVCBhbmltYXRpb24sIHdlIHNob3VsIHN3YXAgdGhlIGFuaW1hdGlvbnMgcmlnaHQgYWZ0ZXIgdGhlIElOIGVuZHNcclxuICAgICAgICAgICAgaWYoIHNsaWRlaW5fb3B0aW4uc2V0dGluZ3Muc2xpZGVfaW4uYW5pbWF0aW9uX291dCApe1xyXG4gICAgICAgICAgICAgICAgaWYoIHNsaWRlaW5fb3B0aW4uc2V0dGluZ3Muc2xpZGVfaW4uYW5pbWF0aW9uX2luICl7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5kZWxheShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZV9pbi5yZW1vdmVDbGFzcyggc2xpZGVpbl9vcHRpbi5zZXR0aW5ncy5zbGlkZV9pbi5hbmltYXRpb25faW4gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVfaW4uYWRkQ2xhc3MoIHNsaWRlaW5fb3B0aW4uc2V0dGluZ3Muc2xpZGVfaW4uYW5pbWF0aW9uX291dCApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDM1MCk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBzbGlkZV9pbi5hZGRDbGFzcyggc2xpZGVpbl9vcHRpbi5zZXR0aW5ncy5zbGlkZV9pbi5hbmltYXRpb25fb3V0ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2xpZGVfaW4udHJpZ2dlcihcInNob3dcIik7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoXCJ3cG9pOmRpc3BsYXlcIiwgW1wic2xpZGVfaW5cIiwgc2xpZGVfaW4sIHNsaWRlX2luLmRhdGEoXCJwb3B1cFwiKSBdKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUcmlnZ2Vyc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlmKCB0eXBlb2YgT3B0aW4uVHJpZ2dlcnNbIHNsaWRlaW5fb3B0aW4uc2V0dGluZ3Muc2xpZGVfaW4uYXBwZWFyX2FmdGVyXSA9PT0gXCJmdW5jdGlvblwiICApXHJcbiAgICAgICAgICAgIE9wdGluLlRyaWdnZXJzWyBzbGlkZWluX29wdGluLnNldHRpbmdzLnNsaWRlX2luLmFwcGVhcl9hZnRlcl0uY2FsbCggbnVsbCwgc2xpZGVpbl9vcHRpbiwgc2xpZGVpbl9vcHRpbi5zZXR0aW5ncy5zbGlkZV9pbiwgc2xpZGVfaW4gKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBcIkh1c3RsZTpbUG9wdXBdIE5vIHRyaWdnZXIgZGVmaW5lZCBmb3IgXCIuIHBvcHVwX29wdGluLnNldHRpbmdzLnBvcHVwLmFwcGVhcl9hZnRlciApO1xyXG4gICAgfVxyXG5cclxufSkoIGpRdWVyeSwgZG9jdW1lbnQsIHdpbmRvdyApO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIGlubGluZSBvcHRpbnMgKCB3aWRnZXQgKVxyXG4gICAgICovXHJcbiAgICB2YXIgaW5jX29wdF9yZW5kZXJfd2lkZ2V0cyA9IF8uZGVib3VuY2UoIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJChcIi5pbmNfb3B0X3dpZGdldF93cmFwLCAuaW5jX29wdF9zaG9ydGNvZGVfd3JhcFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIGlkID0gJHRoaXMuZGF0YShcImlkXCIpLFxyXG4gICAgICAgICAgICAgICAgdHlwZSA9ICR0aGlzLmlzKFwiLmluY19vcHRfd2lkZ2V0X3dyYXBcIikgPyBcIndpZGdldFwiIDogXCJzaG9ydGNvZGVcIjtcclxuXHJcbiAgICAgICAgICAgIGlmKCAhaWQgKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgb3B0aW4gPSBfLmZpbmQoT3B0aW5zLCBmdW5jdGlvbiAob3B0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaWQgPT0gb3B0LmRhdGEub3B0aW5faWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGlmICghb3B0aW4pIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICR0aGlzLmRhdGEoXCJoYW5kbGVcIiwgXy5maW5kS2V5KE9wdGlucywgb3B0aW4pKTtcclxuICAgICAgICAgICAgJHRoaXMuZGF0YShcInR5cGVcIiwgdHlwZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaHRtbCA9IE9wdGluLnJlbmRlcl9vcHRpbiggb3B0aW4gKTtcclxuXHJcbiAgICAgICAgICAgIE9wdGluLmhhbmRsZV9zY3JvbGwoICR0aGlzLCB0eXBlLCBvcHRpbiApO1xyXG5cclxuXHJcbiAgICAgICAgICAgICR0aGlzLmh0bWwoaHRtbCk7XHJcblxyXG4gICAgICAgICAgICAvLyBhZGQgcHJvdmlkZXIgYXJnc1xyXG4gICAgICAgICAgICAkdGhpcy5maW5kKFwiLndwb2ktcHJvdmlkZXItYXJnc1wiKS5odG1sKCBPcHRpbi5yZW5kZXJfcHJvdmlkZXJfYXJncyggb3B0aW4gKSAgKTtcclxuXHJcbiAgICAgICAgICAgIF8uZGVsYXkoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoXCJ3cG9pOmRpc3BsYXlcIiwgW3R5cGUsICR0aGlzLCBvcHRpbiBdKTtcclxuICAgICAgICAgICAgfSwgXy5yYW5kb20oMCwgMzAwKSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgNTAsIHRydWUpO1xyXG5cclxuICAgIGluY19vcHRfcmVuZGVyX3dpZGdldHMoKTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbigndXBmcm9udC1sb2FkJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBpbmNfb3B0X3JlbmRlcl93aWRnZXRzKCk7XHJcblxyXG4gICAgICAgIFVwZnJvbnQuRXZlbnRzLm9uKFwiZW50aXR5Om9iamVjdDpyZWZyZXNoOnN0YXJ0IGVudGl0eTpvYmplY3Q6cmVmcmVzaCBwcmV2aWV3OmJ1aWxkOnN0YXJ0IHVwZnJvbnQ6cHJldmlldzpidWlsZDpzdG9wXCIsIGluY19vcHRfcmVuZGVyX3dpZGdldHMpO1xyXG4gICAgfSk7XHJcblxyXG5cclxufShqUXVlcnkpKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
